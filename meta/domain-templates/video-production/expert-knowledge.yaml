# 動画制作の専門知識とベストプラクティス

professional_insights:
  # 視聴者心理学
  viewer_psychology:
    attention_span:
      first_3_seconds: "フック：視聴継続の50%が決まる"
      first_8_seconds: "コミット：視聴継続の80%が決まる"
      first_30_seconds: "エンゲージメント：最後まで見るかが決まる"
    
    emotional_arc:
      structure: "Setup → Conflict → Resolution"
      timing:
        - "0-20%: 状況設定・問題提起"
        - "20-70%: 展開・深掘り"
        - "70-90%: クライマックス"
        - "90-100%: 解決・CTA"
  
  # プロダクション技法
  production_techniques:
    rule_of_thirds:
      description: "画面を9分割し、交点に重要要素を配置"
      application: "AIは自動的に被写体を適切な位置に配置するよう指示"
    
    color_psychology:
      red: "urgency, passion, danger"
      blue: "trust, stability, calm"
      green: "growth, nature, money"
      yellow: "optimism, clarity, warmth"
      purple: "luxury, creativity, mystery"
      orange: "fun, enthusiasm, creativity"
    
    camera_movements:
      static: "安定感、フォーマル"
      pan: "探索、つながり"
      tilt: "開示、驚き"
      zoom: "焦点、強調"
      dolly: "没入感、接近"
      tracking: "動的、追従"

workflow_optimization:
  # バッチ処理戦略
  batch_strategies:
    url_expiration_mitigation:
      problem: "画像URLが15分で期限切れ"
      solution: |
        1. タイムライン分析
           - 各シーンの生成時間を予測（平均2.5分）
           - URL取得から使用までの時間を計算
        
        2. ジャストインタイム生成
           - 画像生成 → 即座にi2v変換
           - 5並列を超えない（API制限）
           - 各バッチ完了後、即座に次バッチ開始
        
        3. フェイルセーフ
           - URL期限チェック機能
           - 期限切れ前の自動再取得
           - ローカルキャッシュ活用
    
    scene_grouping:
      criteria:
        - "視覚的類似性（同じスタイル）"
        - "時間的近接性（連続するシーン）"
        - "技術的要件（同じ処理）"
      
      benefits:
        - "スタイル一貫性の向上"
        - "処理効率の最適化"
        - "メモリ使用量の削減"

quality_control:
  # 自動品質チェック
  automated_checks:
    visual_consistency:
      - "カラーヒストグラム分析"
      - "スタイル類似度スコア"
      - "オブジェクト継続性"
    
    audio_quality:
      - "ピークレベル: -3dB以下"
      - "LUFS: -14（YouTube）, -16（放送）"
      - "周波数分析: 20Hz-20kHz"
    
    technical_compliance:
      - "フレームレート一致"
      - "解像度統一"
      - "コーデック互換性"
  
  # A/Bテスト推奨項目
  ab_testing:
    thumbnail:
      variants: 3
      metrics: ["CTR", "視聴時間"]
    
    opening:
      variants: 2
      metrics: ["3秒離脱率", "完視聴率"]
    
    cta_placement:
      variants: ["冒頭", "中間", "終了"]
      metrics: ["コンバージョン率"]

platform_specific:
  # プラットフォーム最適化
  youtube:
    algorithm_factors:
      - "視聴時間（最重要）"
      - "クリック率"
      - "エンゲージメント率"
      - "セッション時間"
    
    optimization:
      - "チャプター設定で視聴時間向上"
      - "終了画面20秒確保"
      - "カード配置の最適化"
  
  instagram:
    format_requirements:
      - "9:16 縦型必須"
      - "最大60秒（リール）"
      - "ループ再生考慮"
    
    engagement_tactics:
      - "最初の1秒で視覚的インパクト"
      - "字幕必須（85%が無音視聴）"
      - "CTAは説明文に"
  
  tiktok:
    viral_factors:
      - "最初の3秒完視聴率"
      - "リプレイ率"
      - "シェア率"
    
    content_strategy:
      - "トレンド音源の活用"
      - "ネイティブ感の演出"
      - "縦型フルスクリーン必須"

troubleshooting:
  # よくある問題と解決策
  common_issues:
    - problem: "シーン間のジャンプカット"
      solution: "トランジション追加、モーションブラー"
    
    - problem: "音ズレ"
      solution: "フレームレート統一、タイムコード同期"
    
    - problem: "スタイル不一致"
      solution: "seed値固定、スタイル参照画像統一"
    
    - problem: "レンダリング失敗"
      solution: "解像度段階的アップスケール"
  
  # パフォーマンス最適化
  performance_tips:
    - "プロキシ編集で作業効率化"
    - "レンダリングキューの優先順位付け"
    - "GPUアクセラレーション活用"
    - "分散レンダリング実装"

news_production_strategy:
  # News Video Separated Anchor System
  anchor_generation:
    single_anchor_consistency:
      description: "Use single anchor throughout entire video for consistency"
      implementation: |
        1. Generate anchor once with fixed seed (42)
        2. Use green screen or transparent background
        3. Professional appearance specifications:
           - Business suit (navy/gray/black)
           - Front-facing position
           - Neutral professional expression
           - Consistent lighting (3-point setup simulation)
        4. Save as reference for all segments
    
    anchor_prompts:
      japanese_female: "プロフェッショナルな日本人女性ニュースキャスター、30代、ビジネススーツ、正面向き、グリーンスクリーン背景、スタジオ照明"
      japanese_male: "プロフェッショナルな日本人男性ニュースキャスター、40代、ダークスーツ、正面向き、グリーンスクリーン背景、スタジオ照明"
      english_prompt_format: "Professional [nationality] [gender] news anchor, [age]s, business attire, front-facing, green screen background, studio lighting"
  
  background_generation:
    no_person_policy:
      description: "Backgrounds must never contain any person/anchor"
      implementation: |
        1. Explicitly exclude people in prompts
        2. Use keywords: "empty studio", "no people", "unmanned"
        3. Focus on environment and context
        4. Verify no human figures in generated content
    
    background_types:
      studio: "Empty news studio, professional lighting, news desk without anchor"
      field: "Location footage, establishing shots, no reporter visible"
      graphics: "Data visualizations, maps, charts, infographics"
      b_roll: "Supplementary footage, context shots, no people"
  
  lipsync_pipeline:
    segment_processing:
      description: "Process lip-sync in 5-second segments for quality"
      implementation: |
        1. Split narration audio into 5-second chunks
           ffmpeg -i narration.mp3 -f segment -segment_time 5 -c copy segment_%03d.mp3
        
        2. Generate lip-sync for each segment
           - Use mcp__v2v-kamui-pixverse-lipsync
           - Input: anchor image/video + audio segment
           - Output: 5-second lip-synced video
        
        3. Concatenate all segments
           ffmpeg -f concat -i segments.txt -c copy anchor_full.mp4
    
    audio_synchronization:
      timing_precision: "Frame-accurate sync required (±1 frame tolerance)"
      voice_matching: "Match anchor appearance with appropriate voice"
      language_support: "Japanese primary, English secondary"
  
  composition_strategy:
    layer_structure:
      description: "Professional news composition with layered elements"
      layers:
        - layer: 1
          name: "Background"
          content: "News studio or field footage"
          position: "Full screen"
          opacity: "100%"
        
        - layer: 2
          name: "Anchor"
          content: "Lip-synced anchor video"
          position: "Lower right 1/3 or center"
          opacity: "100%"
          border: "Optional subtle shadow/outline"
        
        - layer: 3
          name: "Graphics"
          content: "Lower thirds, titles, tickers"
          position: "Various"
          opacity: "90-100%"
    
    ffmpeg_composition:
      picture_in_picture: |
        ffmpeg -i background.mp4 -i anchor.mp4 -filter_complex \
        "[1:v]scale=iw/3:ih/3[pip];[0:v][pip]overlay=W-w-20:H-h-20" \
        -c:a copy output.mp4
      
      full_screen_anchor: |
        ffmpeg -i background.mp4 -i anchor.mp4 -filter_complex \
        "[1:v]chromakey=green:0.1:0.2[ckout];[0:v][ckout]overlay[out]" \
        -map "[out]" -c:a copy output.mp4
  
  quality_metrics:
    visual_consistency:
      - "Anchor appearance unchanged across segments"
      - "Background style coherent throughout"
      - "Color grading uniform"
    
    audio_quality:
      - "Clear narration without distortion"
      - "Consistent volume levels"
      - "Natural lip-sync timing"
    
    professional_standards:
      - "Broadcast-quality resolution (1920x1080)"
      - "Stable frame rate (30fps)"
      - "Professional graphics and typography"

industry_standards:
  # Industry standard specifications
  broadcast:
    video: "1920x1080, 29.97fps, 50Mbps"
    audio: "48kHz, 24bit, -23LUFS"
    color: "Rec.709, Legal Range"
  
  cinema:
    video: "4096x2160, 24fps, 250Mbps"
    audio: "48kHz, 24bit, -27LUFS"
    color: "DCI-P3, Full Range"
  
  web:
    video: "1920x1080, 30fps, 8Mbps"
    audio: "44.1kHz, 16bit, -14LUFS"
    color: "sRGB, Full Range"