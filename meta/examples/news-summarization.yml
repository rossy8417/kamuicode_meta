# AIãƒ‹ãƒ¥ãƒ¼ã‚¹è¦ç´„ãƒ»åˆ†æ - è¶…è©³ç´°ã‚¿ã‚¹ã‚¯åˆ†è§£
name: "ai-news-summarization"
description: "è¤‡æ•°ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’åé›†ãƒ»åˆ†æãƒ»è¦ç´„ã—ã¦ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ"
category: "content-analysis-reporting"
complexity_level: 4
estimated_duration_minutes: 35

# å‹•çš„ãƒ¢ãƒ¼ãƒ€ãƒ«å…¥åŠ›ä»•æ§˜ (Dynamic Modal Input Specification)
dynamic_inputs_spec:
  modal_title: "AIãƒ‹ãƒ¥ãƒ¼ã‚¹è¦ç´„ãƒ»åˆ†æè¨­å®š"
  modal_description: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†ãƒ»åˆ†æãƒ»è¦ç´„ã®è©³ç´°è¨­å®šã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
  form_sections:
    - section_name: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†è¨­å®š"
      section_description: "åé›†ã™ã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ç¯„å›²ã¨å¯¾è±¡ã‚’è¨­å®š"
      inputs:
        - name: "news_topic"
          label: "åˆ†æå¯¾è±¡ãƒˆãƒ”ãƒƒã‚¯ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"
          type: "textarea"
          required: true
          placeholder: "ä¾‹: AIæŠ€è¡“ã®é€²å±•ã€æš—å·é€šè²¨å¸‚å ´å‹•å‘ã€æ°—å€™å¤‰å‹•å¯¾ç­–ã€çµŒæ¸ˆæ”¿ç­–"
          description: "åˆ†æã—ãŸã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
          validation:
            min_length: 5
            max_length: 200
            
        - name: "news_sources"
          label: "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹"
          type: "select"
          required: true
          description: "å„ªå…ˆçš„ã«åé›†ã™ã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹ã®ç¨®é¡"
          options:
            - value: "major_media"
              label: "ğŸ“º ä¸»è¦ãƒ¡ãƒ‡ã‚£ã‚¢"
              description: "å¤§æ‰‹æ–°èç¤¾ã€ãƒ†ãƒ¬ãƒ“å±€ã€é€šä¿¡ç¤¾"
            - value: "tech_media"
              label: "ğŸ’» ãƒ†ãƒƒã‚¯ç³»ãƒ¡ãƒ‡ã‚£ã‚¢"
              description: "æŠ€è¡“å°‚é–€èªŒã€ITç³»ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆ"
            - value: "business_media"
              label: "ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹ç³»ãƒ¡ãƒ‡ã‚£ã‚¢"
              description: "çµŒæ¸ˆç´™ã€ãƒ“ã‚¸ãƒã‚¹å°‚é–€ãƒ¡ãƒ‡ã‚£ã‚¢"
            - value: "international"
              label: "ğŸŒ å›½éš›ãƒ¡ãƒ‡ã‚£ã‚¢"
              description: "æµ·å¤–ã®ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹"
            - value: "comprehensive"
              label: "ğŸ” åŒ…æ‹¬çš„åé›†"
              description: "å¹…åºƒã„ã‚½ãƒ¼ã‚¹ã‹ã‚‰åé›†"
            - value: "specialized"
              label: "ğŸ¯ å°‚é–€ãƒ¡ãƒ‡ã‚£ã‚¢"
              description: "ç‰¹å®šåˆ†é‡ã®å°‚é–€ãƒ¡ãƒ‡ã‚£ã‚¢"
              
        - name: "geographic_focus"
          label: "åœ°åŸŸçš„ç„¦ç‚¹"
          type: "select"
          required: true
          description: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†ã®åœ°åŸŸçš„ãªé‡ç‚¹ã‚’é¸æŠ"
          options:
            - value: "global"
              label: "ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«"
              description: "ä¸–ç•Œå…¨ä½“ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹"
            - value: "japan"
              label: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬"
              description: "æ—¥æœ¬å›½å†…ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸­å¿ƒ"
            - value: "asia_pacific"
              label: "ğŸŒ ã‚¢ã‚¸ã‚¢å¤ªå¹³æ´‹"
              description: "ã‚¢ã‚¸ã‚¢å¤ªå¹³æ´‹åœ°åŸŸ"
            - value: "north_america"
              label: "ğŸ‡ºğŸ‡¸ åŒ—ç±³"
              description: "ç±³å›½ãƒ»ã‚«ãƒŠãƒ€ä¸­å¿ƒ"
            - value: "europe"
              label: "ğŸ‡ªğŸ‡º ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘"
              description: "ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘åœ°åŸŸ"

    - section_name: "åˆ†æãƒ»è¦ç´„è¨­å®š"
      section_description: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æã¨è¦ç´„ã®è©³ç´°è¨­å®š"
      inputs:
        - name: "analysis_period"
          label: "åˆ†æå¯¾è±¡æœŸé–“"
          type: "select"
          required: true
          description: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†ãƒ»åˆ†æã®å¯¾è±¡æœŸé–“"
          options:
            - value: "24hours"
              label: "ğŸ“… éå»24æ™‚é–“"
              description: "æœ€æ–°ã®24æ™‚é–“"
            - value: "3days"
              label: "ğŸ“… éå»3æ—¥é–“"
              description: "ç›´è¿‘3æ—¥é–“ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹"
            - value: "1week"
              label: "ğŸ“… éå»1é€±é–“"
              description: "1é€±é–“åˆ†ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹"
            - value: "2weeks"
              label: "ğŸ“… éå»2é€±é–“"
              description: "2é€±é–“åˆ†ã®ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ"
            - value: "1month"
              label: "ğŸ“… éå»1ãƒ¶æœˆ"
              description: "æœˆæ¬¡ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ"
              
        - name: "summary_length"
          label: "è¦ç´„ã®è©³ç´°åº¦"
          type: "select"
          required: true
          description: "ç”Ÿæˆã™ã‚‹è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆã®é•·ã•ãƒ»è©³ç´°åº¦"
          options:
            - value: "brief"
              label: "ğŸ“‹ ç°¡æ½”ç‰ˆ (5-10è¦ç‚¹)"
              description: "è¦ç‚¹ã®ã¿ã®çŸ­ã„è¦ç´„"
            - value: "standard"
              label: "ğŸ“„ æ¨™æº–ç‰ˆ (10-20è¦ç‚¹)"
              description: "ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸè¦ç´„"
            - value: "detailed"
              label: "ğŸ“š è©³ç´°ç‰ˆ (20-40è¦ç‚¹)"
              description: "åŒ…æ‹¬çš„ã§è©³ç´°ãªåˆ†æ"
            - value: "comprehensive"
              label: "ğŸ“– åŒ…æ‹¬ç‰ˆ (40+è¦ç‚¹)"
              description: "ç¶²ç¾…çš„ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆ"
              
        - name: "analysis_focus"
          label: "åˆ†æã®ç„¦ç‚¹"
          type: "select"
          required: true
          description: "ç‰¹ã«é‡ç‚¹ã‚’ç½®ãåˆ†æã®è¦³ç‚¹"
          options:
            - value: "trend_analysis"
              label: "ğŸ“ˆ ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ"
              description: "æ™‚ç³»åˆ—ã§ã®å¤‰åŒ–ã¨ãƒˆãƒ¬ãƒ³ãƒ‰"
            - value: "sentiment_analysis"
              label: "ğŸ˜Š æ„Ÿæƒ…ãƒ»è«–èª¿åˆ†æ"
              description: "ä¸–è«–ã‚„æ„Ÿæƒ…ã®å‚¾å‘åˆ†æ"
            - value: "impact_analysis"
              label: "ğŸ’¥ å½±éŸ¿åº¦åˆ†æ"
              description: "ç¤¾ä¼šãƒ»çµŒæ¸ˆã¸ã®å½±éŸ¿è©•ä¾¡"
            - value: "stakeholder_analysis"
              label: "ğŸ‘¥ é–¢ä¿‚è€…åˆ†æ"
              description: "é–¢ä¿‚è€…ãƒ»çµ„ç¹”ã®å‹•å‘åˆ†æ"
            - value: "comparative_analysis"
              label: "âš–ï¸ æ¯”è¼ƒåˆ†æ"
              description: "ç•°ãªã‚‹è¦–ç‚¹ãƒ»æ„è¦‹ã®å¯¾æ¯”"

    - section_name: "å‡ºåŠ›ãƒ»é…ä¿¡è¨­å®š"
      section_description: "ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›å½¢å¼ã¨é…ä¿¡ã«é–¢ã™ã‚‹è¨­å®š"
      inputs:
        - name: "output_format"
          label: "ãƒ¡ã‚¤ãƒ³å‡ºåŠ›å½¢å¼"
          type: "select"
          required: true
          description: "è¦ç´„ãƒ¬ãƒãƒ¼ãƒˆã®ä¸»è¦ãªå‡ºåŠ›å½¢å¼"
          options:
            - value: "executive_summary"
              label: "ğŸ“Š ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼"
              description: "çµŒå–¶å±¤å‘ã‘ã®ç°¡æ½”ãªè¦ç´„"
            - value: "detailed_report"
              label: "ğŸ“„ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ"
              description: "åŒ…æ‹¬çš„ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆ"
            - value: "newsletter"
              label: "ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼"
              description: "èª­ã¿ã‚„ã™ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ¬ã‚¿ãƒ¼å½¢å¼"
            - value: "bullet_points"
              label: "ğŸ”¸ ç®‡æ¡æ›¸ãè¦ç´„"
              description: "è¦ç‚¹ã‚’ç®‡æ¡æ›¸ãã§æ•´ç†"
            - value: "timeline"
              label: "â° ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å½¢å¼"
              description: "æ™‚ç³»åˆ—ã§ã®å‡ºæ¥äº‹æ•´ç†"
              
        - name: "urgency_level"
          label: "ç·Šæ€¥åº¦ãƒ»é‡è¦åº¦ãƒ•ã‚£ãƒ«ã‚¿"
          type: "range"
          required: true
          description: "å«ã‚ã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®æœ€ä½é‡è¦åº¦ãƒ¬ãƒ™ãƒ«"
          min: 1
          max: 5
          default: 3
          step: 1
          labels:
            1: "å…¨ãƒ‹ãƒ¥ãƒ¼ã‚¹"
            3: "ä¸­é‡è¦åº¦ä»¥ä¸Š"
            5: "æœ€é‡è¦ã®ã¿"
            
        - name: "include_sources"
          label: "æƒ…å ±æºã®è¡¨ç¤º"
          type: "select"
          required: false
          description: "è¦ç´„ã«æƒ…å ±æºã‚’å«ã‚ã‚‹ã‹ã©ã†ã‹"
          options:
            - value: "full_citations"
              label: "ğŸ“š å®Œå…¨ãªå¼•ç”¨"
              description: "è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒ¡ãƒ‡ã‚£ã‚¢åã€URL"
            - value: "source_names"
              label: "ğŸ“ ã‚½ãƒ¼ã‚¹åã®ã¿"
              description: "ãƒ¡ãƒ‡ã‚£ã‚¢åã®ã¿è¡¨ç¤º"
            - value: "minimal"
              label: "ğŸ“‹ æœ€å°é™"
              description: "ä¸»è¦ã‚½ãƒ¼ã‚¹ã®ã¿"
            - value: "none"
              label: "âŒ è¡¨ç¤ºã—ãªã„"
              description: "æƒ…å ±æºã‚’éè¡¨ç¤º"

  # GitHub Actions å…¥åŠ›ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  github_inputs_mapping:
    news_topic:
      input_name: "news_topic"  
      description: "åˆ†æå¯¾è±¡ãƒˆãƒ”ãƒƒã‚¯ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰"
      required: true
      type: "string"
    news_sources:
      input_name: "news_sources"
      description: "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹"
      required: true
      type: "choice"
      options: ["major_media", "tech_media", "business_media", "international", "comprehensive", "specialized"]
    geographic_focus:
      input_name: "geographic_focus"
      description: "åœ°åŸŸçš„ç„¦ç‚¹"
      required: true
      type: "choice"
      options: ["global", "japan", "asia_pacific", "north_america", "europe"]
    analysis_period:
      input_name: "analysis_period"
      description: "åˆ†æå¯¾è±¡æœŸé–“"
      required: true
      type: "choice"
      options: ["24hours", "3days", "1week", "2weeks", "1month"]
    summary_length:
      input_name: "summary_length"
      description: "è¦ç´„ã®è©³ç´°åº¦"
      required: true
      type: "choice"
      options: ["brief", "standard", "detailed", "comprehensive"]
    analysis_focus:
      input_name: "analysis_focus"
      description: "åˆ†æã®ç„¦ç‚¹"
      required: true
      type: "choice"
      options: ["trend_analysis", "sentiment_analysis", "impact_analysis", "stakeholder_analysis", "comparative_analysis"]
    output_format:
      input_name: "output_format"
      description: "ãƒ¡ã‚¤ãƒ³å‡ºåŠ›å½¢å¼"
      required: true
      type: "choice"
      options: ["executive_summary", "detailed_report", "newsletter", "bullet_points", "timeline"]
    urgency_level:
      input_name: "urgency_level"
      description: "ç·Šæ€¥åº¦ãƒ»é‡è¦åº¦ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆ1-5ï¼‰"
      required: true
      type: "string"
      default: "3"
    include_sources:
      input_name: "include_sources"
      description: "æƒ…å ±æºã®è¡¨ç¤º"
      required: false
      type: "choice"
      options: ["full_citations", "source_names", "minimal", "none"]

# äººé–“ã®ç„¡æ„è­˜æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹
human_process:
  - phase: "information_gathering"
    description: "æƒ…å ±åé›†æ®µéšï¼ˆã‚½ãƒ¼ã‚¹é¸å®šãƒ»ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰"
  - phase: "content_filtering" 
    description: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ®µéšï¼ˆé–¢é€£æ€§ãƒ»ä¿¡é ¼æ€§åˆ¤å®šï¼‰"
  - phase: "analysis_processing"
    description: "åˆ†æå‡¦ç†æ®µéšï¼ˆå†…å®¹ç†è§£ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ï¼‰"
  - phase: "synthesis_summarization"
    description: "çµ±åˆè¦ç´„æ®µéšï¼ˆæƒ…å ±çµ±åˆãƒ»è¦ç‚¹æŠ½å‡ºï¼‰"
  - phase: "report_creation"
    description: "ãƒ¬ãƒãƒ¼ãƒˆä½œæˆæ®µéšï¼ˆæ§‹é€ åŒ–ãƒ»å¯è¦–åŒ–ãƒ»é…ä¿¡æº–å‚™ï¼‰"

# GitHub Actions ãƒãƒ¼ãƒ‰è¨­è¨ˆ
github_actions_config:
  workflow_name: "AI News Summarization & Analysis"
  on_triggers: ["workflow_dispatch", "schedule", "issues"]
  permissions:
    contents: "write"
    issues: "write"
    actions: "read"
  artifacts_retention_days: 30
  max_parallel_jobs: 4

# è¶…è©³ç´°ã‚¿ã‚¹ã‚¯åˆ†è§£
tasks:
  # === äº‹å‰ãƒ†ã‚¹ãƒˆæ®µéš ===
  - id: "mcp-api-connectivity-test"
    name: "ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†ç”¨MCPãƒ»APIæ¥ç¶šãƒ†ã‚¹ãƒˆ"
    phase: "pre_validation"
    github_job: "connectivity-test"
    type: "validation"
    implementation: "mcp"
    duration_minutes: 3
    dependencies: []
    parallel_group: null
    
    github_steps:
      - name: "Test news collection services"
        shell: "bash"
        script: |
          echo "ğŸ“° Testing news collection and analysis services..."
          
          mkdir -p .logs/connectivity-tests
          
          # Web Search API ãƒ†ã‚¹ãƒˆï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†ã§å¿…é ˆï¼‰
          echo "Testing web search services (required for news collection)..."
          if [ -n "${{ secrets.GOOGLE_SEARCH_API_KEY }}" ] && [ -n "${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}" ]; then
            if timeout 30 curl -s "https://www.googleapis.com/customsearch/v1?key=${{ secrets.GOOGLE_SEARCH_API_KEY }}&cx=${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}&q=latest+technology+news&num=5" > .logs/connectivity-tests/web-search-test.log 2>&1; then
              WEB_SEARCH_STATUS="success"
              echo "âœ… Google Search API: Available"
            else
              WEB_SEARCH_STATUS="failed"
              echo "âŒ Google Search API: Failed - Cannot collect news without search"
            fi
          else
            WEB_SEARCH_STATUS="not_configured"
            echo "âš ï¸ Google Search API: Not configured"
          fi
          
          # RSS Feed Parser ãƒ†ã‚¹ãƒˆï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ•ã‚£ãƒ¼ãƒ‰ç”¨ï¼‰
          echo "Testing RSS feed parsing..."
          if timeout 30 curl -s "https://feeds.bbci.co.uk/news/rss.xml" | head -n 20 > .logs/connectivity-tests/rss-test.log 2>&1; then
            RSS_STATUS="success"
            echo "âœ… RSS Feed: Available"
          else
            RSS_STATUS="failed"
            echo "âš ï¸ RSS Feed: Not available - will use web search only"
          fi
          
          # Claude Code AIåˆ†ææ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆã‚«ã‚¹ã‚¿ãƒ åˆ†ææ©Ÿèƒ½ï¼‰
          echo "Testing Claude Code AI analysis functions..."
          if timeout 20 claude-code --prompt "Test prompt: Analyze this sample news text: 'Technology stocks surge as AI developments continue.' Return 'TEST_SUCCESS' if working." > .logs/connectivity-tests/ai-analysis-test.log 2>&1; then
            if grep -q "TEST_SUCCESS" .logs/connectivity-tests/ai-analysis-test.log; then
              AI_ANALYSIS_STATUS="success"
              echo "âœ… Claude Code AI Analysis: Available"
            else
              AI_ANALYSIS_STATUS="partial"
              echo "âš ï¸ Claude Code AI Analysis: Partial - response received but format needs adjustment"
            fi
          else
            AI_ANALYSIS_STATUS="failed"
            echo "âŒ Claude Code AI Analysis: Failed - will use basic text analysis"
          fi
          
          # å¤–éƒ¨ãƒ‹ãƒ¥ãƒ¼ã‚¹API ãƒ†ã‚¹ãƒˆï¼ˆNewsAPIç­‰ï¼‰
          echo "Testing external news APIs..."
          if [ -n "${{ secrets.NEWS_API_KEY }}" ]; then
            if timeout 30 curl -s "https://newsapi.org/v2/top-headlines?apiKey=${{ secrets.NEWS_API_KEY }}&pageSize=1" > .logs/connectivity-tests/news-api-test.log 2>&1; then
              NEWS_API_STATUS="success"
              echo "âœ… News API: Available"
            else
              NEWS_API_STATUS="failed"
              echo "âš ï¸ News API: Failed - will use web search for collection"
            fi
          else
            NEWS_API_STATUS="not_configured"
            echo "â„¹ï¸ News API: Not configured - using web search"
          fi
          
          # æ„Ÿæƒ…åˆ†æAPI ãƒ†ã‚¹ãƒˆï¼ˆãƒ†ã‚­ã‚¹ãƒˆåˆ†æç”¨ï¼‰
          echo "Testing sentiment analysis services..."
          if [ -n "${{ secrets.SENTIMENT_API_KEY }}" ]; then
            if timeout 20 curl -s -H "Authorization: Bearer ${{ secrets.SENTIMENT_API_KEY }}" "https://api.example-sentiment.com/analyze" -d "text=test" > .logs/connectivity-tests/sentiment-test.log 2>&1; then
              SENTIMENT_API_STATUS="success"
              echo "âœ… Sentiment API: Available"
            else
              SENTIMENT_API_STATUS="failed"
              echo "âš ï¸ Sentiment API: Failed - will use built-in analysis"
            fi
          else
            SENTIMENT_API_STATUS="not_configured"
            echo "â„¹ï¸ Sentiment API: Not configured - using built-in analysis"
          fi
          
          # ãƒ†ã‚¹ãƒˆçµæœã‚’JSONä¿å­˜
          cat > .logs/connectivity-tests/test-results.json << EOF
          {
            "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
            "required_for_workflow": {
              "web_search_api": "$WEB_SEARCH_STATUS",
              "rss_parser": "$RSS_STATUS",
              "ai_analysis": "$AI_ANALYSIS_STATUS",
              "news_api": "$NEWS_API_STATUS",
              "sentiment_api": "$SENTIMENT_API_STATUS"
            },
            "overall_status": "$([ "$WEB_SEARCH_STATUS" = "success" ] && echo "ready" || echo "degraded")",
            "critical_services_available": $([ "$WEB_SEARCH_STATUS" = "success" ] && echo "true" || echo "false"),
            "workflow_can_proceed": $([ "$WEB_SEARCH_STATUS" = "success" ] && echo "true" || echo "false"),
            "enhanced_features_available": $([ "$NEWS_API_STATUS" = "success" ] || [ "$RSS_STATUS" = "success" ] && echo "true" || echo "false")
          }
          EOF
          
          # ç’°å¢ƒå¤‰æ•°ã«çµæœã‚’è¨­å®š
          echo "CONNECTIVITY_STATUS=$([ "$WEB_SEARCH_STATUS" = "success" ] && echo "ready" || echo "failed")" >> $GITHUB_ENV
          echo "ENHANCED_COLLECTION=$([ "$NEWS_API_STATUS" = "success" ] || [ "$RSS_STATUS" = "success" ] && echo "true" || echo "false")" >> $GITHUB_ENV
          echo "ADVANCED_ANALYSIS=$([ "$SENTIMENT_API_STATUS" = "success" ] && echo "true" || echo "false")" >> $GITHUB_ENV
          
          echo "ğŸ“° News service connectivity tests completed"
          
    validation:
      criteria:
        - "Web Search APIãŒåˆ©ç”¨å¯èƒ½ï¼ˆå¿…é ˆï¼‰"
        - "å°‘ãªãã¨ã‚‚1ã¤ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†æ–¹æ³•ãŒåˆ©ç”¨å¯èƒ½"
        - "ãƒ†ã‚¹ãƒˆçµæœãŒJSONå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã‚‹"
      validation_script: |
        if [ ! -f ".logs/connectivity-tests/test-results.json" ]; then
          echo "âŒ VALIDATION FAILED: Test results missing"
          exit 1
        fi
        
        WORKFLOW_CAN_PROCEED=$(jq -r '.workflow_can_proceed' .logs/connectivity-tests/test-results.json)
        if [ "$WORKFLOW_CAN_PROCEED" = "true" ]; then
          echo "âœ… Validation passed: News collection services ready"
        else
          echo "âŒ VALIDATION FAILED: Critical news services unavailable"
          exit 1
        fi
        
    error_handling:
      retry_count: 2
      retry_delay_seconds: 20
      fallback_strategy: "web_search_only"
      fallback_script: |
        echo "âš ï¸ Using fallback: Web search only mode"
        cat > .logs/connectivity-tests/test-results.json << EOF
        {
          "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
          "required_for_workflow": {
            "web_search_api": "assumed_available",
            "rss_parser": "failed",
            "ai_analysis": "failed",
            "news_api": "failed",
            "sentiment_api": "failed"
          },
          "overall_status": "fallback_mode",
          "critical_services_available": true,
          "workflow_can_proceed": true,
          "enhanced_features_available": false
        }
        EOF
        echo "CONNECTIVITY_STATUS=fallback_mode" >> $GITHUB_ENV
        echo "ENHANCED_COLLECTION=false" >> $GITHUB_ENV
        echo "ADVANCED_ANALYSIS=false" >> $GITHUB_ENV
        
    progress_links:
      log_url: "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
      test_results: ".logs/connectivity-tests/test-results.json"

  # === æƒ…å ±åé›†æ®µéš ===
  - id: "topic-keyword-extraction"
    name: "åˆ†æå¯¾è±¡ãƒˆãƒ”ãƒƒã‚¯ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º"
    phase: "information_gathering"
    github_job: "topic-extraction"
    type: "analysis"
    implementation: "ai"
    duration_minutes: 2
    dependencies: ["mcp-api-connectivity-test"]
    parallel_group: null
    
    github_steps:
      - name: "Extract analysis topics and keywords"
        shell: "bash"
        script: |
          echo "ğŸ” Extracting analysis topics and keywords..."
          
          mkdir -p .logs/information-gathering
          
          # å…¥åŠ›ã•ã‚ŒãŸãƒˆãƒ”ãƒƒã‚¯ã¾ãŸã¯ã‚¤ã‚·ãƒ¥ãƒ¼ã‹ã‚‰åˆ†æå¯¾è±¡ã‚’æŠ½å‡º
          INPUT_TOPIC="${{ github.event.inputs.news_topic || github.event.issue.title || 'latest technology news' }}"
          ANALYSIS_PERIOD="${{ github.event.inputs.analysis_period || '24 hours' }}"
          
          echo "Input topic: $INPUT_TOPIC"
          echo "Analysis period: $ANALYSIS_PERIOD"
          
          # Claude Code ã§ãƒˆãƒ”ãƒƒã‚¯åˆ†æãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º
          claude-code --prompt "ä»¥ä¸‹ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æè¦æ±‚ã‹ã‚‰ãƒˆãƒ”ãƒƒã‚¯ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ï¼š
          
          åˆ†æå¯¾è±¡: $INPUT_TOPIC
          æœŸé–“: $ANALYSIS_PERIOD
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"primary_topic\": \"ãƒ¡ã‚¤ãƒ³ã®åˆ†æãƒˆãƒ”ãƒƒã‚¯\",
            \"sub_topics\": [\"é–¢é€£ã™ã‚‹ã‚µãƒ–ãƒˆãƒ”ãƒƒã‚¯\"],
            \"search_keywords\": [\"æ¤œç´¢ç”¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ\"],
            \"related_terms\": [\"é–¢é€£ç”¨èªãƒ»é¡ç¾©èª\"],
            \"exclusion_keywords\": [\"é™¤å¤–ã—ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰\"],
            \"news_categories\": [\"å¯¾è±¡ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚«ãƒ†ã‚´ãƒª\"],
            \"geographic_focus\": \"åœ°åŸŸçš„ç„¦ç‚¹ï¼ˆglobal|regional|localï¼‰\",
            \"analysis_scope\": {
              \"depth\": \"high|medium|low\",
              \"breadth\": \"comprehensive|focused|specific\",
              \"time_sensitivity\": \"breaking|recent|trend_analysis\"
            },
            \"source_priorities\": [\"å„ªå…ˆã™ã¹ãæƒ…å ±æºã‚¿ã‚¤ãƒ—\"],
            \"expected_volume\": \"äºˆæƒ³ã•ã‚Œã‚‹è¨˜äº‹æ•°ã®ç¯„å›²\"
          }" > .logs/information-gathering/topic-analysis.json
          
          TOPIC_ANALYSIS=$(cat .logs/information-gathering/topic-analysis.json)
          echo "TOPIC_ANALYSIS=$TOPIC_ANALYSIS" >> $GITHUB_ENV
          
          # æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®š
          SEARCH_KEYWORDS=$(echo "$TOPIC_ANALYSIS" | jq -r '.search_keywords | join(" ")')
          echo "SEARCH_KEYWORDS=$SEARCH_KEYWORDS" >> $GITHUB_ENV
          
          echo "âœ… Topic and keyword extraction completed"

  - id: "multi-source-news-collection"
    name: "ãƒãƒ«ãƒã‚½ãƒ¼ã‚¹ãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†"
    phase: "information_gathering"
    github_job: "news-collection"
    type: "collection"
    implementation: "api"
    tool: "web-search-api"
    duration_minutes: 5
    dependencies: ["topic-keyword-extraction"]
    parallel_group: null
    
    github_steps:
      - name: "Collect news from multiple sources"
        shell: "bash"
        script: |
          echo "ğŸ“° Collecting news from multiple sources..."
          
          mkdir -p .logs/information-gathering/sources
          
          # Web Search API ã‚’ä½¿ç”¨ã—ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹åé›†
          echo "Collecting from web search..."
          if [ -n "${{ secrets.GOOGLE_SEARCH_API_KEY }}" ] && [ -n "${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}" ]; then
            curl -s "https://www.googleapis.com/customsearch/v1?key=${{ secrets.GOOGLE_SEARCH_API_KEY }}&cx=${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}&q=${SEARCH_KEYWORDS}+news&num=10&dateRestrict=d1" \
              > .logs/information-gathering/sources/web-search-results.json 2>&1
          else
            echo '{"items":[]}' > .logs/information-gathering/sources/web-search-results.json
          fi
          
          # è¿½åŠ ã®æ¤œç´¢ï¼ˆç•°ãªã‚‹è§’åº¦ã‹ã‚‰ï¼‰
          echo "Collecting additional perspectives..."
          RELATED_TERMS=$(echo "$TOPIC_ANALYSIS" | jq -r '.related_terms[0:3] | join("+")')
          if [ -n "${{ secrets.GOOGLE_SEARCH_API_KEY }}" ] && [ -n "${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}" ]; then
            curl -s "https://www.googleapis.com/customsearch/v1?key=${{ secrets.GOOGLE_SEARCH_API_KEY }}&cx=${{ secrets.GOOGLE_SEARCH_ENGINE_ID }}&q=${RELATED_TERMS}+analysis+report&num=10" \
              > .logs/information-gathering/sources/related-search-results.json 2>&1
          else
            echo '{"items":[]}' > .logs/information-gathering/sources/related-search-results.json
          fi
          
          # å¤–éƒ¨ãƒ‹ãƒ¥ãƒ¼ã‚¹APIä½¿ç”¨ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰
          if [ "$ENHANCED_COLLECTION" = "true" ] && [ -n "${{ secrets.NEWS_API_KEY }}" ]; then
            echo "Collecting from News API..."
            curl -s "https://newsapi.org/v2/everything?q=$SEARCH_KEYWORDS&sortBy=publishedAt&pageSize=30&apiKey=${{ secrets.NEWS_API_KEY }}" \
              > .logs/information-gathering/sources/news-api-results.json 2>&1 || echo "News API collection failed"
          fi
          
          # RSS ãƒ•ã‚£ãƒ¼ãƒ‰åé›†ï¼ˆåˆ©ç”¨å¯èƒ½ãªå ´åˆï¼‰
          if [ "$RSS_STATUS" = "success" ]; then
            echo "Collecting from RSS feeds..."
            # ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆã®RSSãƒ•ã‚£ãƒ¼ãƒ‰
            curl -s "https://rss.cnn.com/rss/edition.rss" | head -n 100 > .logs/information-gathering/sources/cnn-rss.xml 2>&1 || echo '{"items":[]}' > .logs/information-gathering/sources/cnn-rss.json
            curl -s "https://feeds.reuters.com/reuters/topNews" | head -n 100 > .logs/information-gathering/sources/reuters-rss.xml 2>&1 || echo '{"items":[]}' > .logs/information-gathering/sources/reuters-rss.json
          fi
          
          # åé›†çµæœã®çµ±åˆ
          echo "Consolidating collected news..."
          claude-code --prompt "ä»¥ä¸‹ã®è¤‡æ•°ã‚½ãƒ¼ã‚¹ã‹ã‚‰åé›†ã—ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆãƒ»æ•´ç†ã—ã¦ãã ã•ã„ï¼š
          
          Webæ¤œç´¢çµæœ: $(cat .logs/information-gathering/sources/web-search-results.json 2>/dev/null || echo '{}')
          é–¢é€£æ¤œç´¢çµæœ: $(cat .logs/information-gathering/sources/related-search-results.json 2>/dev/null || echo '{}')
          $([ -f '.logs/information-gathering/sources/news-api-results.json' ] && echo "News APIçµæœ: $(cat .logs/information-gathering/sources/news-api-results.json)" || echo "")
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"collection_summary\": {
              \"total_articles_found\": \"åé›†è¨˜äº‹æ•°\",
              \"unique_sources\": \"ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚½ãƒ¼ã‚¹æ•°\",
              \"collection_timespan\": \"åé›†å¯¾è±¡æœŸé–“\",
              \"collection_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
            },
            \"articles\": [
              {
                \"title\": \"è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"source\": \"æƒ…å ±æº\",
                \"url\": \"è¨˜äº‹URL\",
                \"published_date\": \"å…¬é–‹æ—¥æ™‚\",
                \"summary\": \"è¨˜äº‹è¦ç´„\",
                \"relevance_score\": \"1-10ç‚¹ã§ã®é–¢é€£æ€§ã‚¹ã‚³ã‚¢\",
                \"source_credibility\": \"high|medium|low\"
              }
            ],
            \"collection_quality\": {
              \"coverage_completeness\": \"1-10ç‚¹ã§ã®ç¶²ç¾…æ€§\",
              \"source_diversity\": \"1-10ç‚¹ã§ã®ã‚½ãƒ¼ã‚¹å¤šæ§˜æ€§\",
              \"content_freshness\": \"1-10ç‚¹ã§ã®æƒ…å ±æ–°é®®åº¦\"
            }
          }" > .logs/information-gathering/consolidated-news.json
          
          CONSOLIDATED_NEWS=$(cat .logs/information-gathering/consolidated-news.json)
          echo "CONSOLIDATED_NEWS_FILE=.logs/information-gathering/consolidated-news.json" >> $GITHUB_ENV
          
          echo "ğŸ“° Multi-source news collection completed"
          
    validation:
      criteria:
        - "å°‘ãªãã¨ã‚‚5ä»¶ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ãŒåé›†ã•ã‚Œã¦ã„ã‚‹"
        - "è¤‡æ•°ã®æƒ…å ±æºã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒåé›†ã•ã‚Œã¦ã„ã‚‹"
        - "çµ±åˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒJSONå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã‚‹"
      validation_script: |
        if [ ! -f ".logs/information-gathering/consolidated-news.json" ]; then
          echo "âŒ VALIDATION FAILED: Consolidated news file missing"
          exit 1
        fi
        
        ARTICLE_COUNT=$(jq -r '.collection_summary.total_articles_found // 0' .logs/information-gathering/consolidated-news.json)
        if [ "$ARTICLE_COUNT" -ge 5 ]; then
          echo "âœ… Validation passed: $ARTICLE_COUNT articles collected"
        else
          echo "âš ï¸ WARNING: Only $ARTICLE_COUNT articles collected (minimum 5 recommended)"
        fi

  # === ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ®µéš ===
  - id: "content-relevance-filtering"
    name: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–¢é€£æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"
    phase: "content_filtering"
    github_job: "relevance-filtering"
    type: "filtering"
    implementation: "ai"
    duration_minutes: 3
    dependencies: ["multi-source-news-collection"]
    parallel_group: "filtering_parallel"
    
    github_steps:
      - name: "Filter content by relevance"
        shell: "bash"
        script: |
          echo "ğŸ” Filtering content by relevance..."
          
          mkdir -p .logs/content-filtering
          
          # é–¢é€£æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          claude-code --prompt "ä»¥ä¸‹ã®ãƒˆãƒ”ãƒƒã‚¯åˆ†æã«åŸºã¥ã„ã¦ã€åé›†ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã®é–¢é€£æ€§ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ãã ã•ã„ï¼š
          
          åˆ†æå¯¾è±¡ãƒˆãƒ”ãƒƒã‚¯: $TOPIC_ANALYSIS
          åé›†ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹: $(cat $CONSOLIDATED_NEWS_FILE)
          
          ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºæº–:
          - ä¸»è¦ãƒˆãƒ”ãƒƒã‚¯ã¨ã®é–¢é€£åº¦
          - æƒ…å ±ã®æœ‰ç”¨æ€§
          - é‡è¤‡è¨˜äº‹ã®é™¤å»
          - ä¿¡é ¼æ€§ã®é«˜ã„ã‚½ãƒ¼ã‚¹å„ªå…ˆ
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"filtering_results\": {
              \"original_count\": \"å…ƒã®è¨˜äº‹æ•°\",
              \"filtered_count\": \"ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã®è¨˜äº‹æ•°\",
              \"removal_reasons\": {\"é™¤å¤–ç†ç”±\": \"ä»¶æ•°\"},
              \"filtering_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
            },
            \"highly_relevant_articles\": [
              {
                \"title\": \"è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"source\": \"æƒ…å ±æº\",
                \"url\": \"è¨˜äº‹URL\",
                \"published_date\": \"å…¬é–‹æ—¥æ™‚\",
                \"summary\": \"è¨˜äº‹è¦ç´„\",
                \"relevance_score\": \"é–¢é€£æ€§ã‚¹ã‚³ã‚¢ï¼ˆ8-10ç‚¹ï¼‰\",
                \"key_points\": [\"é‡è¦ãƒã‚¤ãƒ³ãƒˆ\"],
                \"topic_alignment\": \"primary|secondary|supporting\"
              }
            ],
            \"moderately_relevant_articles\": [\"ä¸­ç¨‹åº¦ã®é–¢é€£æ€§è¨˜äº‹ï¼ˆåŒå½¢å¼ï¼‰\"],
            \"quality_metrics\": {
              \"average_relevance_score\": \"å¹³å‡é–¢é€£æ€§ã‚¹ã‚³ã‚¢\",
              \"source_credibility_distribution\": {\"high\": \"ä»¶æ•°\", \"medium\": \"ä»¶æ•°\", \"low\": \"ä»¶æ•°\"},
              \"topic_coverage_completeness\": \"1-10ç‚¹ã§ã®ç¶²ç¾…æ€§\"
            }
          }" > .logs/content-filtering/relevance-filtered.json
          
          RELEVANCE_FILTERED=$(cat .logs/content-filtering/relevance-filtered.json)
          echo "RELEVANCE_FILTERED_FILE=.logs/content-filtering/relevance-filtered.json" >> $GITHUB_ENV
          
          echo "âœ… Content relevance filtering completed"

  - id: "credibility-verification"
    name: "æƒ…å ±æºä¿¡é ¼æ€§æ¤œè¨¼"
    phase: "content_filtering"
    github_job: "credibility-check"
    type: "verification"
    implementation: "ai"
    duration_minutes: 2
    dependencies: ["multi-source-news-collection"]
    parallel_group: "filtering_parallel"
    
    github_steps:
      - name: "Verify source credibility"
        shell: "bash"
        script: |
          echo "ğŸ”’ Verifying source credibility..."
          
          # æƒ…å ±æºã®ä¿¡é ¼æ€§æ¤œè¨¼
          claude-code --prompt "ä»¥ä¸‹ã®åé›†ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã®æƒ…å ±æºã®ä¿¡é ¼æ€§ã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„ï¼š
          
          åé›†ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹: $(cat $CONSOLIDATED_NEWS_FILE)
          
          æ¤œè¨¼åŸºæº–:
          - å ±é“æ©Ÿé–¢ã®è©•åˆ¤ã¨å®Ÿç¸¾
          - ãƒã‚¤ã‚¢ã‚¹ã®æœ‰ç„¡
          - ãƒ•ã‚¡ã‚¯ãƒˆãƒã‚§ãƒƒã‚¯å±¥æ­´
          - å°‚é–€æ€§ã¨æ¨©å¨æ€§
          - ä¸€æ¬¡æƒ…å ±æºã¸ã®å‚ç…§
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"credibility_assessment\": {
              \"verification_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"total_sources_evaluated\": \"è©•ä¾¡ã—ãŸã‚½ãƒ¼ã‚¹æ•°\",
              \"credibility_distribution\": {
                \"high_credibility\": \"é«˜ä¿¡é ¼æ€§ã‚½ãƒ¼ã‚¹æ•°\",
                \"medium_credibility\": \"ä¸­ä¿¡é ¼æ€§ã‚½ãƒ¼ã‚¹æ•°\",
                \"low_credibility\": \"ä½ä¿¡é ¼æ€§ã‚½ãƒ¼ã‚¹æ•°\",
                \"unknown_credibility\": \"ä¸æ˜ã‚½ãƒ¼ã‚¹æ•°\"
              }
            },
            \"source_ratings\": [
              {
                \"source_name\": \"æƒ…å ±æºå\",
                \"credibility_rating\": \"high|medium|low|unknown\",
                \"bias_assessment\": \"left|center|right|unknown\",
                \"reliability_factors\": [\"ä¿¡é ¼æ€§è¦å› \"],
                \"risk_factors\": [\"ãƒªã‚¹ã‚¯è¦å› \"],
                \"recommendation\": \"include|caution|exclude\"
              }
            ],
            \"flagged_articles\": [
              {
                \"title\": \"è¦æ³¨æ„è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"source\": \"æƒ…å ±æº\",
                \"flag_reason\": \"ãƒ•ãƒ©ã‚°ç†ç”±\",
                \"verification_status\": \"needs_verification|disputed|false\"
              }
            ],
            \"verification_summary\": {
              \"high_confidence_articles\": \"é«˜ç¢ºä¿¡åº¦è¨˜äº‹æ•°\",
              \"requires_additional_verification\": \"è¿½åŠ æ¤œè¨¼å¿…è¦è¨˜äº‹æ•°\",
              \"overall_collection_reliability\": \"1-10ç‚¹ã§ã®å…¨ä½“ä¿¡é ¼æ€§\"
            }
          }" > .logs/content-filtering/credibility-assessment.json
          
          CREDIBILITY_ASSESSMENT=$(cat .logs/content-filtering/credibility-assessment.json)
          echo "CREDIBILITY_ASSESSMENT_FILE=.logs/content-filtering/credibility-assessment.json" >> $GITHUB_ENV
          
          echo "âœ… Source credibility verification completed"

  - id: "duplicate-detection-removal"
    name: "é‡è¤‡è¨˜äº‹æ¤œå‡ºãƒ»é™¤å»"
    phase: "content_filtering"
    github_job: "duplicate-removal"
    type: "processing"
    implementation: "ai"
    duration_minutes: 2
    dependencies: ["content-relevance-filtering", "credibility-verification"]
    parallel_group: null
    
    github_steps:
      - name: "Detect and remove duplicate articles"
        shell: "bash"
        script: |
          echo "ğŸ”„ Detecting and removing duplicate articles..."
          
          # é‡è¤‡è¨˜äº‹ã®æ¤œå‡ºãƒ»é™¤å»
          claude-code --prompt "ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã‹ã‚‰é‡è¤‡ã‚’æ¤œå‡ºã—ã€æœ€è‰¯ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¿æŒã—ã¦ãã ã•ã„ï¼š
          
          é–¢é€£æ€§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœ: $(cat $RELEVANCE_FILTERED_FILE)
          ä¿¡é ¼æ€§æ¤œè¨¼çµæœ: $(cat $CREDIBILITY_ASSESSMENT_FILE)
          
          é‡è¤‡æ¤œå‡ºåŸºæº–:
          - ã‚¿ã‚¤ãƒˆãƒ«ã®é¡ä¼¼åº¦
          - å†…å®¹ã®é‡è¤‡åº¦
          - åŒä¸€äº‹ä»¶ãƒ»å‡ºæ¥äº‹ã®æ‰±ã„
          - å…¬é–‹æ™‚é–“ã®è¿‘ã•
          
          ä¿æŒå„ªå…ˆé †ä½:
          1. ä¿¡é ¼æ€§ã®é«˜ã„ã‚½ãƒ¼ã‚¹
          2. ã‚ˆã‚Šè©³ç´°ãªå†…å®¹
          3. ã‚ˆã‚Šæ–°ã—ã„æƒ…å ±
          4. ã‚ªãƒªã‚¸ãƒŠãƒ«å ±é“
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"deduplication_results\": {
              \"original_count\": \"é‡è¤‡é™¤å»å‰ã®è¨˜äº‹æ•°\",
              \"final_count\": \"é‡è¤‡é™¤å»å¾Œã®è¨˜äº‹æ•°\",
              \"duplicates_removed\": \"é™¤å»ã•ã‚ŒãŸé‡è¤‡è¨˜äº‹æ•°\",
              \"deduplication_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
            },
            \"final_article_set\": [
              {
                \"title\": \"è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"source\": \"æƒ…å ±æº\",
                \"url\": \"è¨˜äº‹URL\",
                \"published_date\": \"å…¬é–‹æ—¥æ™‚\",
                \"summary\": \"è¨˜äº‹è¦ç´„\",
                \"relevance_score\": \"é–¢é€£æ€§ã‚¹ã‚³ã‚¢\",
                \"credibility_rating\": \"ä¿¡é ¼æ€§è©•ä¾¡\",
                \"key_points\": [\"é‡è¦ãƒã‚¤ãƒ³ãƒˆ\"],
                \"article_type\": \"breaking|analysis|opinion|report\",
                \"unique_aspects\": [\"ã“ã®è¨˜äº‹å›ºæœ‰ã®å´é¢\"]
              }
            ],
            \"removed_duplicates\": [
              {
                \"removed_title\": \"é™¤å»ã•ã‚ŒãŸè¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"kept_instead\": \"ä»£ã‚ã‚Šã«ä¿æŒã—ãŸè¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"removal_reason\": \"é™¤å»ç†ç”±\"
              }
            ],
            \"quality_improvement\": {
              \"information_density_increase\": \"æƒ…å ±å¯†åº¦å‘ä¸Šåº¦\",
              \"source_diversity_maintained\": \"ã‚½ãƒ¼ã‚¹å¤šæ§˜æ€§ç¶­æŒåº¦\",
              \"coverage_completeness\": \"ç¶²ç¾…æ€§ç¶­æŒåº¦\"
            }
          }" > .logs/content-filtering/deduplicated-articles.json
          
          DEDUPLICATED_ARTICLES=$(cat .logs/content-filtering/deduplicated-articles.json)
          echo "DEDUPLICATED_ARTICLES_FILE=.logs/content-filtering/deduplicated-articles.json" >> $GITHUB_ENV
          
          echo "âœ… Duplicate detection and removal completed"

  # === åˆ†æå‡¦ç†æ®µéš ===
  - id: "content-analysis"
    name: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è©³ç´°åˆ†æ"
    phase: "analysis_processing"
    github_job: "content-analysis"
    type: "analysis"
    implementation: "ai"
    duration_minutes: 4
    dependencies: ["duplicate-detection-removal"]
    parallel_group: "analysis_parallel"
    
    github_steps:
      - name: "Perform detailed content analysis"
        shell: "bash"
        script: |
          echo "ğŸ§  Performing detailed content analysis..."
          
          mkdir -p .logs/analysis-processing
          
          # è©³ç´°ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ
          claude-code --prompt "ä»¥ä¸‹ã®å³é¸ã•ã‚ŒãŸãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã«å¯¾ã—ã¦è©³ç´°ãªåˆ†æã‚’è¡Œã£ã¦ãã ã•ã„ï¼š
          
          åˆ†æå¯¾è±¡è¨˜äº‹: $(cat $DEDUPLICATED_ARTICLES_FILE)
          å…ƒã®åˆ†æè¦æ±‚: $TOPIC_ANALYSIS
          
          åˆ†æè¦³ç‚¹:
          1. ä¸»è¦ãƒ†ãƒ¼ãƒã¨ã‚µãƒ–ãƒ†ãƒ¼ãƒã®ç‰¹å®š
          2. æ™‚ç³»åˆ—ã§ã®å‡ºæ¥äº‹ã®æµã‚Œ
          3. é–¢ä¿‚è€…ãƒ»çµ„ç¹”ã®å½¹å‰²åˆ†æ
          4. å½±éŸ¿åº¦ã¨é‡è¦åº¦ã®è©•ä¾¡
          5. ãƒˆãƒ¬ãƒ³ãƒ‰ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è­˜åˆ¥
          6. åœ°åŸŸçš„ãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªå½±éŸ¿
          7. ç”£æ¥­ãƒ»åˆ†é‡ã¸ã®å½±éŸ¿
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"analysis_summary\": {
              \"analysis_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"articles_analyzed\": \"åˆ†æè¨˜äº‹æ•°\",
              \"analysis_depth\": \"comprehensive|standard|basic\",
              \"confidence_level\": \"1-10ç‚¹ã§ã®åˆ†æä¿¡é ¼åº¦\"
            },
            \"thematic_analysis\": {
              \"primary_themes\": [\"ä¸»è¦ãƒ†ãƒ¼ãƒãƒªã‚¹ãƒˆ\"],
              \"secondary_themes\": [\"å‰¯æ¬¡ãƒ†ãƒ¼ãƒãƒªã‚¹ãƒˆ\"],
              \"emerging_themes\": [\"æ–°å‡ºç¾ãƒ†ãƒ¼ãƒãƒªã‚¹ãƒˆ\"],
              \"theme_interconnections\": [\"ãƒ†ãƒ¼ãƒé–“ã®é–¢é€£æ€§\"]
            },
            \"temporal_analysis\": {
              \"event_timeline\": [
                {
                  \"date\": \"æ—¥ä»˜\",
                  \"event\": \"å‡ºæ¥äº‹\",
                  \"significance\": \"é‡è¦åº¦ï¼ˆ1-10ï¼‰\",
                  \"impact_scope\": \"å½±éŸ¿ç¯„å›²\"
                }
              ],
              \"trend_direction\": \"increasing|decreasing|stable|volatile\",
              \"momentum\": \"accelerating|steady|slowing\"
            },
            \"stakeholder_analysis\": {
              \"key_players\": [
                {
                  \"name\": \"é–¢ä¿‚è€…ãƒ»çµ„ç¹”å\",
                  \"role\": \"å½¹å‰²\",
                  \"influence_level\": \"high|medium|low\",
                  \"position\": \"supportive|neutral|opposing|unknown\"
                }
              ],
              \"power_dynamics\": [\"ãƒ‘ãƒ¯ãƒ¼ãƒãƒ©ãƒ³ã‚¹ã®åˆ†æ\"]
            },
            \"impact_assessment\": {
              \"immediate_impacts\": [\"å³åº§ã®å½±éŸ¿\"],
              \"short_term_implications\": [\"çŸ­æœŸçš„ãªå«ã¿\"],
              \"long_term_consequences\": [\"é•·æœŸçš„ãªçµæœ\"],
              \"affected_sectors\": [\"å½±éŸ¿ã‚’å—ã‘ã‚‹åˆ†é‡\"],
              \"geographic_impact\": \"local|regional|national|international\"
            },
            \"sentiment_trends\": {
              \"overall_sentiment\": \"positive|negative|neutral|mixed\",
              \"sentiment_distribution\": {\"positive\": \"ï¼…\", \"negative\": \"ï¼…\", \"neutral\": \"ï¼…\"},
              \"sentiment_evolution\": \"improving|worsening|stable\"
            }
          }" > .logs/analysis-processing/content-analysis.json
          
          CONTENT_ANALYSIS=$(cat .logs/analysis-processing/content-analysis.json)
          echo "CONTENT_ANALYSIS_FILE=.logs/analysis-processing/content-analysis.json" >> $GITHUB_ENV
          
          echo "âœ… Detailed content analysis completed"

  - id: "sentiment-emotion-analysis"
    name: "æ„Ÿæƒ…ãƒ»ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ"
    phase: "analysis_processing"
    github_job: "sentiment-analysis"
    type: "analysis"
    implementation: "mcp"
    tool: "sentiment-analysis"
    duration_minutes: 3
    dependencies: ["duplicate-detection-removal"]
    parallel_group: "analysis_parallel"
    
    github_steps:
      - name: "Analyze sentiment and emotions"
        shell: "bash"
        script: |
          echo "ğŸ˜Š Analyzing sentiment and emotions..."
          
          # æ„Ÿæƒ…ãƒ»ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ
          if [ "$ADVANCED_ANALYSIS" = "true" ] && [ -n "${{ secrets.SENTIMENT_API_KEY }}" ]; then
            echo "Using advanced sentiment analysis API..."
            
            # å¤–éƒ¨ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æAPIä½¿ç”¨
            cat "$DEDUPLICATED_ARTICLES_FILE" | jq -r '.final_article_set[].summary' | while read -r text; do
              curl -s -H "Authorization: Bearer ${{ secrets.SENTIMENT_API_KEY }}" \
                -H "Content-Type: application/json" \
                -d "{\"text\": \"$text\"}" \
                "https://api.example-sentiment.com/analyze" >> .logs/analysis-processing/sentiment-raw.json
              echo "" >> .logs/analysis-processing/sentiment-raw.json
            done
          else
            echo "Using built-in sentiment analysis..."
          fi
          
          # Claude Code ã«ã‚ˆã‚‹åŒ…æ‹¬çš„æ„Ÿæƒ…åˆ†æ
          claude-code --prompt "ä»¥ä¸‹ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ç¾¤ã«å¯¾ã—ã¦åŒ…æ‹¬çš„ãªæ„Ÿæƒ…ãƒ»ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æã‚’è¡Œã£ã¦ãã ã•ã„ï¼š
          
          åˆ†æå¯¾è±¡è¨˜äº‹: $(cat $DEDUPLICATED_ARTICLES_FILE)
          $([ -f '.logs/analysis-processing/sentiment-raw.json' ] && echo "å¤–éƒ¨APIåˆ†æçµæœ: $(cat .logs/analysis-processing/sentiment-raw.json)" || echo "")
          
          åˆ†æé …ç›®:
          1. å…¨ä½“çš„ãªã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆå‚¾å‘
          2. è¨˜äº‹ã”ã¨ã®æ„Ÿæƒ…åˆ†æ
          3. ãƒˆãƒ”ãƒƒã‚¯åˆ¥æ„Ÿæƒ…åˆ†å¸ƒ
          4. æ™‚ç³»åˆ—ã§ã®æ„Ÿæƒ…å¤‰åŒ–
          5. ã‚½ãƒ¼ã‚¹åˆ¥æ„Ÿæƒ…å‚¾å‘
          6. èª­è€…ã«ä¸ãˆã‚‹å¿ƒç†çš„å½±éŸ¿
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"sentiment_analysis_summary\": {
              \"analysis_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"total_texts_analyzed\": \"åˆ†æãƒ†ã‚­ã‚¹ãƒˆæ•°\",
              \"analysis_method\": \"advanced_api|built_in|hybrid\",
              \"confidence_score\": \"1-10ç‚¹ã§ã®åˆ†æä¿¡é ¼åº¦\"
            },
            \"overall_sentiment\": {
              \"dominant_sentiment\": \"positive|negative|neutral\",
              \"sentiment_strength\": \"strong|moderate|weak\",
              \"sentiment_distribution\": {
                \"positive\": \"æ­£é¢æ„Ÿæƒ…ã®å‰²åˆ\",
                \"negative\": \"è² é¢æ„Ÿæƒ…ã®å‰²åˆ\",
                \"neutral\": \"ä¸­æ€§æ„Ÿæƒ…ã®å‰²åˆ\"
              },
              \"emotional_tone\": \"hopeful|concerned|urgent|analytical|celebratory\"
            },
            \"article_level_sentiment\": [
              {
                \"article_title\": \"è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«\",
                \"primary_sentiment\": \"æ„Ÿæƒ…åˆ†é¡\",
                \"sentiment_score\": \"æ„Ÿæƒ…å¼·åº¦ï¼ˆ-1.0 to 1.0ï¼‰\",
                \"detected_emotions\": [\"æ¤œå‡ºã•ã‚ŒãŸæ„Ÿæƒ…\"],
                \"emotional_keywords\": [\"æ„Ÿæƒ…ã‚’è¡¨ã™ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰\"]
              }
            ],
            \"temporal_sentiment_trends\": [
              {
                \"time_period\": \"æ™‚æœŸ\",
                \"average_sentiment\": \"å¹³å‡ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ\",
                \"trend_direction\": \"improving|declining|stable\"
              }
            ],
            \"topic_sentiment_breakdown\": {
              \"ãƒ†ãƒ¼ãƒå\": {
                \"sentiment\": \"æ„Ÿæƒ…åˆ†é¡\",
                \"intensity\": \"å¼·åº¦\",
                \"public_concern_level\": \"high|medium|low\"
              }
            },
            \"psychological_impact_assessment\": {
              \"reader_emotional_response\": \"äºˆæƒ³ã•ã‚Œã‚‹èª­è€…åå¿œ\",
              \"concern_level\": \"ä¸å®‰ãƒ¬ãƒ™ãƒ«\",
              \"call_to_action_potential\": \"è¡Œå‹•å–šèµ·potential\",
              \"information_urgency\": \"æƒ…å ±ã®ç·Šæ€¥æ€§\"
            }
          }" > .logs/analysis-processing/sentiment-analysis.json
          
          SENTIMENT_ANALYSIS=$(cat .logs/analysis-processing/sentiment-analysis.json)
          echo "SENTIMENT_ANALYSIS_FILE=.logs/analysis-processing/sentiment-analysis.json" >> $GITHUB_ENV
          
          echo "âœ… Sentiment and emotion analysis completed"

  - id: "trend-pattern-identification"
    name: "ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³è­˜åˆ¥"
    phase: "analysis_processing"
    github_job: "trend-analysis"
    type: "analysis"
    implementation: "ai"
    duration_minutes: 3
    dependencies: ["content-analysis", "sentiment-emotion-analysis"]
    parallel_group: null
    
    github_steps:
      - name: "Identify trends and patterns"
        shell: "bash"
        script: |
          echo "ğŸ“ˆ Identifying trends and patterns..."
          
          # ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³è­˜åˆ¥
          claude-code --prompt "ä»¥ä¸‹ã®åˆ†æçµæœã‚’çµ±åˆã—ã¦ã€ãƒˆãƒ¬ãƒ³ãƒ‰ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è­˜åˆ¥ã—ã¦ãã ã•ã„ï¼š
          
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ: $(cat $CONTENT_ANALYSIS_FILE)
          ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ: $(cat $SENTIMENT_ANALYSIS_FILE)
          
          ãƒ‘ã‚¿ãƒ¼ãƒ³è­˜åˆ¥é …ç›®:
          1. å ±é“é »åº¦ã®å¤‰åŒ–
          2. æ³¨ç›®åº¦ã®æ¨ç§»
          3. é–¢ä¿‚è€…ã®è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
          4. åœ°ç†çš„ãªåºƒãŒã‚Šãƒ‘ã‚¿ãƒ¼ãƒ³
          5. æ¥­ç•Œãƒ»åˆ†é‡ã¸ã®æ³¢åŠãƒ‘ã‚¿ãƒ¼ãƒ³
          6. ä¸–è«–ãƒ»æ„Ÿæƒ…ã®å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³
          7. é¡ä¼¼äº‹ä¾‹ã¨ã®æ¯”è¼ƒ
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"trend_analysis_summary\": {
              \"analysis_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"analysis_period_covered\": \"åˆ†æå¯¾è±¡æœŸé–“\",
              \"pattern_confidence\": \"1-10ç‚¹ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºä¿¡åº¦\",
              \"trend_stability\": \"stable|emerging|volatile|declining\"
            },
            \"identified_trends\": [
              {
                \"trend_name\": \"ãƒˆãƒ¬ãƒ³ãƒ‰å\",
                \"trend_type\": \"upward|downward|cyclical|sporadic\",
                \"trend_strength\": \"strong|moderate|weak\",
                \"time_frame\": \"short_term|medium_term|long_term\",
                \"supporting_evidence\": [\"è£ä»˜ã‘ã¨ãªã‚‹è¨¼æ‹ \"],
                \"significance\": \"high|medium|low\",
                \"predictive_indicators\": [\"äºˆæ¸¬æŒ‡æ¨™\"]
              }
            ],
            \"pattern_analysis\": {
              \"recurring_patterns\": [\"ç¹°ã‚Šè¿”ã•ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³\"],
              \"anomalies\": [\"ç•°å¸¸ãƒ»ä¾‹å¤–çš„ãªäº‹è±¡\"],
              \"correlation_findings\": [\"ç›¸é–¢é–¢ä¿‚ã®ç™ºè¦‹\"],
              \"causation_hypotheses\": [\"å› æœé–¢ä¿‚ã®ä»®èª¬\"]
            },
            \"comparative_analysis\": {
              \"historical_parallels\": [\"æ­´å²çš„ãªé¡ä¼¼äº‹ä¾‹\"],
              \"cross_industry_patterns\": [\"æ¥­ç•Œæ¨ªæ–­çš„ãƒ‘ã‚¿ãƒ¼ãƒ³\"],
              \"geographic_variations\": [\"åœ°åŸŸçš„ãªå·®ç•°\"],
              \"scale_differences\": [\"è¦æ¨¡ã«ã‚ˆã‚‹é•ã„\"]
            },
            \"predictive_insights\": {
              \"short_term_predictions\": [\"çŸ­æœŸäºˆæ¸¬\"],
              \"medium_term_outlook\": [\"ä¸­æœŸè¦‹é€šã—\"],
              \"potential_scenarios\": [\"æƒ³å®šã‚·ãƒŠãƒªã‚ª\"],
              \"key_variables_to_watch\": [\"æ³¨è¦–ã™ã¹ãå¤‰æ•°\"],
              \"early_warning_indicators\": [\"æ—©æœŸè­¦å‘ŠæŒ‡æ¨™\"]
            },
            \"strategic_implications\": {
              \"stakeholder_actions\": [\"é–¢ä¿‚è€…ãŒå–ã‚‹ã¹ãè¡Œå‹•\"],
              \"risk_factors\": [\"ãƒªã‚¹ã‚¯è¦å› \"],
              \"opportunity_areas\": [\"æ©Ÿä¼šé ˜åŸŸ\"],
              \"preparation_recommendations\": [\"æº–å‚™æ¨å¥¨äº‹é …\"]
            }
          }" > .logs/analysis-processing/trend-analysis.json
          
          TREND_ANALYSIS=$(cat .logs/analysis-processing/trend-analysis.json)
          echo "TREND_ANALYSIS_FILE=.logs/analysis-processing/trend-analysis.json" >> $GITHUB_ENV
          
          echo "âœ… Trend and pattern identification completed"

  # === çµ±åˆè¦ç´„æ®µéš ===
  - id: "comprehensive-synthesis"
    name: "åŒ…æ‹¬çš„æƒ…å ±çµ±åˆ"
    phase: "synthesis_summarization"
    github_job: "information-synthesis"
    type: "synthesis"
    implementation: "ai"
    duration_minutes: 4
    dependencies: ["trend-pattern-identification"]
    parallel_group: null
    
    github_steps:
      - name: "Synthesize comprehensive information"
        shell: "bash"
        script: |
          echo "ğŸ”„ Synthesizing comprehensive information..."
          
          mkdir -p .logs/synthesis-summarization
          
          # åŒ…æ‹¬çš„ãªæƒ…å ±çµ±åˆ
          claude-code --prompt "ä»¥ä¸‹ã®å…¨ã¦ã®åˆ†æçµæœã‚’çµ±åˆã—ã¦ã€åŒ…æ‹¬çš„ãªæƒ…å ±çµ±åˆã‚’è¡Œã£ã¦ãã ã•ã„ï¼š
          
          å…ƒã®åˆ†æè¦æ±‚: $TOPIC_ANALYSIS
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ: $(cat $CONTENT_ANALYSIS_FILE)
          ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æ: $(cat $SENTIMENT_ANALYSIS_FILE)
          ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ: $(cat $TREND_ANALYSIS_FILE)
          æœ€çµ‚è¨˜äº‹é›†: $(cat $DEDUPLICATED_ARTICLES_FILE)
          
          çµ±åˆã®è¦³ç‚¹:
          1. å…¨ä½“åƒã®æ§‹ç¯‰
          2. é‡è¦ãªã‚¤ãƒ³ã‚µã‚¤ãƒˆã®æŠ½å‡º
          3. çŸ›ç›¾ã™ã‚‹æƒ…å ±ã®èª¿æ•´
          4. æ¬ è½æƒ…å ±ã®ç‰¹å®š
          5. ç¢ºä¿¡åº¦ã®è©•ä¾¡
          6. å®Ÿç”¨çš„ãªç¤ºå”†ã®å°å‡º
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"synthesis_summary\": {
              \"synthesis_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"data_sources_integrated\": \"çµ±åˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹æ•°\",
              \"analysis_dimensions\": [\"åˆ†ææ¬¡å…ƒãƒªã‚¹ãƒˆ\"],
              \"synthesis_confidence\": \"1-10ç‚¹ã§ã®çµ±åˆä¿¡é ¼åº¦\",
              \"information_completeness\": \"1-10ç‚¹ã§ã®æƒ…å ±å®Œå…¨æ€§\"
            },
            \"executive_summary\": {
              \"situation_overview\": \"çŠ¶æ³æ¦‚è¦ï¼ˆ200-300æ–‡å­—ï¼‰\",
              \"key_developments\": [\"ä¸»è¦ãªå±•é–‹äº‹é …\"],
              \"critical_insights\": [\"é‡è¦ãªã‚¤ãƒ³ã‚µã‚¤ãƒˆ\"],
              \"immediate_implications\": [\"å³åº§ã®å«æ„\"],
              \"strategic_significance\": \"æˆ¦ç•¥çš„é‡è¦æ€§ã®èª¬æ˜\"
            },
            \"detailed_findings\": {
              \"primary_conclusions\": [\"ä¸»è¦çµè«–\"],
              \"supporting_evidence\": [\"è£ä»˜ã‘è¨¼æ‹ \"],
              \"confidence_levels\": {\"çµè«–\": \"ç¢ºä¿¡åº¦\"},
              \"areas_of_uncertainty\": [\"ä¸ç¢ºå®Ÿæ€§ã®é ˜åŸŸ\"],
              \"contradictory_information\": [\"çŸ›ç›¾ã™ã‚‹æƒ…å ±\"]
            },
            \"stakeholder_impact_analysis\": {
              \"high_impact_stakeholders\": [\"é«˜å½±éŸ¿é–¢ä¿‚è€…\"],
              \"medium_impact_stakeholders\": [\"ä¸­å½±éŸ¿é–¢ä¿‚è€…\"],
              \"indirect_effects\": [\"é–“æ¥çš„å½±éŸ¿\"],
              \"ripple_effects\": [\"æ³¢åŠåŠ¹æœ\"]
            },
            \"temporal_synthesis\": {
              \"historical_context\": \"æ­´å²çš„æ–‡è„ˆ\",
              \"current_status\": \"ç¾åœ¨ã®çŠ¶æ³\",
              \"trajectory_analysis\": \"è»Œé“åˆ†æ\",
              \"future_outlook\": \"å°†æ¥è¦‹é€šã—\"
            },
            \"risk_opportunity_matrix\": {
              \"high_probability_risks\": [\"é«˜ç¢ºç‡ãƒªã‚¹ã‚¯\"],
              \"low_probability_high_impact_risks\": [\"ä½ç¢ºç‡é«˜å½±éŸ¿ãƒªã‚¹ã‚¯\"],
              \"near_term_opportunities\": [\"çŸ­æœŸæ©Ÿä¼š\"],
              \"strategic_opportunities\": [\"æˆ¦ç•¥çš„æ©Ÿä¼š\"]
            },
            \"information_gaps\": {
              \"critical_missing_information\": [\"é‡è¦ãªæ¬ è½æƒ…å ±\"],
              \"additional_research_needed\": [\"è¿½åŠ èª¿æŸ»ãŒå¿…è¦ãªé ˜åŸŸ\"],
              \"verification_required\": [\"æ¤œè¨¼ãŒå¿…è¦ãªäº‹é …\"]
            },
            \"actionable_insights\": {
              \"immediate_actions\": [\"å³åº§ã®è¡Œå‹•é …ç›®\"],
              \"strategic_recommendations\": [\"æˆ¦ç•¥çš„æ¨å¥¨äº‹é …\"],
              \"monitoring_priorities\": [\"ç›£è¦–å„ªå…ˆäº‹é …\"],
              \"contingency_planning\": [\"ç·Šæ€¥æ™‚å¯¾å¿œè¨ˆç”»\"
            }
          }" > .logs/synthesis-summarization/comprehensive-synthesis.json
          
          COMPREHENSIVE_SYNTHESIS=$(cat .logs/synthesis-summarization/comprehensive-synthesis.json)
          echo "COMPREHENSIVE_SYNTHESIS_FILE=.logs/synthesis-summarization/comprehensive-synthesis.json" >> $GITHUB_ENV
          
          echo "âœ… Comprehensive information synthesis completed"

  - id: "executive-summary-generation"
    name: "ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ç”Ÿæˆ"
    phase: "synthesis_summarization"
    github_job: "executive-summary"
    type: "generation"
    implementation: "ai"
    duration_minutes: 3
    dependencies: ["comprehensive-synthesis"]
    parallel_group: null
    
    github_steps:
      - name: "Generate executive summary"
        shell: "bash"
        script: |
          echo "ğŸ“Š Generating executive summary..."
          
          # ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ç”Ÿæˆ
          claude-code --prompt "ä»¥ä¸‹ã®åŒ…æ‹¬çš„çµ±åˆçµæœã‹ã‚‰ã€çµŒå–¶å±¤ãƒ»æ„æ€æ±ºå®šè€…å‘ã‘ã®ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
          
          çµ±åˆåˆ†æçµæœ: $(cat $COMPREHENSIVE_SYNTHESIS_FILE)
          
          ã‚µãƒãƒªãƒ¼è¦ä»¶:
          - ç°¡æ½”ã§ç†è§£ã—ã‚„ã™ã„
          - æ„æ€æ±ºå®šã«å¿…è¦ãªæƒ…å ±ã‚’å„ªå…ˆ
          - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ˜ç¢ºã«
          - ãƒªã‚¹ã‚¯ã¨æ©Ÿä¼šã‚’å¼·èª¿
          - æ™‚é–“è»¸ã‚’æ„è­˜ã—ãŸæ§‹æˆ
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã¨Markdownã®ä¸¡æ–¹ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ï¼š" > .temp-prompt.txt
          
          # JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆéƒ¨åˆ†
          cat >> .temp-prompt.txt << 'EOF'
          
          JSONå½¢å¼:
          {
            "executive_summary": {
              "document_title": "ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼",
              "analysis_date": "åˆ†ææ—¥æ™‚",
              "topic_focus": "åˆ†æç„¦ç‚¹ãƒˆãƒ”ãƒƒã‚¯",
              "urgency_level": "high|medium|low",
              "summary_sections": {
                "situation_snapshot": "çŠ¶æ³ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆ100æ–‡å­—ä»¥å†…ï¼‰",
                "key_findings": ["ä¸»è¦ç™ºè¦‹äº‹é …ï¼ˆå„50æ–‡å­—ä»¥å†…ï¼‰"],
                "immediate_concerns": ["å³åº§ã®æ‡¸å¿µäº‹é …"],
                "strategic_opportunities": ["æˆ¦ç•¥çš„æ©Ÿä¼š"],
                "recommended_actions": ["æ¨å¥¨è¡Œå‹•ï¼ˆå„ªå…ˆé †ä½ä»˜ãï¼‰"],
                "timeline_critical_events": ["æ™‚ç³»åˆ—é‡è¦äº‹è±¡"],
                "success_metrics": ["æˆåŠŸæŒ‡æ¨™"],
                "next_review_date": "æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼äºˆå®šæ—¥"
              },
              "dashboard_metrics": {
                "overall_risk_level": "high|medium|low",
                "trend_direction": "positive|negative|neutral",
                "stakeholder_confidence": "high|medium|low",
                "market_impact_potential": "significant|moderate|minimal"
              }
            }
          }
          
          Markdownå½¢å¼:
          # ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼: [ãƒˆãƒ”ãƒƒã‚¯å]
          
          **åˆ†ææ—¥æ™‚**: [æ—¥æ™‚]  
          **ç·Šæ€¥åº¦**: [ãƒ¬ãƒ™ãƒ«]  
          **æ‰€è¦æ™‚é–“**: 3-5åˆ†
          
          ## ğŸ¯ çŠ¶æ³æ¦‚è¦
          [ç°¡æ½”ãªç¾çŠ¶èª¬æ˜]
          
          ## ğŸ“Š ä¸»è¦ç™ºè¦‹äº‹é …
          1. [é‡è¦ç™ºè¦‹1]
          2. [é‡è¦ç™ºè¦‹2]
          3. [é‡è¦ç™ºè¦‹3]
          
          ## âš ï¸ å³åº§ã®æ‡¸å¿µäº‹é …
          - [æ‡¸å¿µ1]
          - [æ‡¸å¿µ2]
          
          ## ğŸ’¡ æˆ¦ç•¥çš„æ©Ÿä¼š
          - [æ©Ÿä¼š1]
          - [æ©Ÿä¼š2]
          
          ## âœ… æ¨å¥¨è¡Œå‹• (å„ªå…ˆé †ä½ä»˜ã)
          ### ğŸ”´ å³åº§ã«å¿…è¦
          1. [è¡Œå‹•1]
          2. [è¡Œå‹•2]
          
          ### ğŸŸ¡ çŸ­æœŸå¯¾å¿œ (1-2é€±é–“)
          1. [è¡Œå‹•3]
          2. [è¡Œå‹•4]
          
          ### ğŸŸ¢ ä¸­é•·æœŸå¯¾å¿œ (1-3ãƒ¶æœˆ)
          1. [è¡Œå‹•5]
          2. [è¡Œå‹•6]
          
          ## ğŸ“ˆ ä¸»è¦æŒ‡æ¨™
          - **ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: [ãƒ¬ãƒ™ãƒ«]
          - **ãƒˆãƒ¬ãƒ³ãƒ‰æ–¹å‘**: [æ–¹å‘]
          - **å¸‚å ´å½±éŸ¿åº¦**: [å½±éŸ¿åº¦]
          
          ## ğŸ“… æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼
          **äºˆå®šæ—¥**: [æ—¥ä»˜]  
          **ãƒ•ã‚©ãƒ¼ã‚«ã‚¹**: [é‡ç‚¹é …ç›®]
          
          ---
          *ã“ã®ã‚µãƒãƒªãƒ¼ã¯ AI ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šç”Ÿæˆã•ã‚Œã¾ã—ãŸ*
          EOF
          
          # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè¡Œ
          claude-code --prompt "$(cat .temp-prompt.txt)" > .logs/synthesis-summarization/executive-summary-raw.txt
          
          # JSONéƒ¨åˆ†ã¨Markdownéƒ¨åˆ†ã‚’åˆ†é›¢
          sed -n '/^{/,/^}/p' .logs/synthesis-summarization/executive-summary-raw.txt > .logs/synthesis-summarization/executive-summary.json
          sed -n '/^# /,$p' .logs/synthesis-summarization/executive-summary-raw.txt > .logs/synthesis-summarization/executive-summary.md
          
          # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
          rm .temp-prompt.txt
          
          EXECUTIVE_SUMMARY_JSON=$(cat .logs/synthesis-summarization/executive-summary.json)
          echo "EXECUTIVE_SUMMARY_JSON_FILE=.logs/synthesis-summarization/executive-summary.json" >> $GITHUB_ENV
          echo "EXECUTIVE_SUMMARY_MD_FILE=.logs/synthesis-summarization/executive-summary.md" >> $GITHUB_ENV
          
          echo "âœ… Executive summary generation completed"

  # === ãƒ¬ãƒãƒ¼ãƒˆä½œæˆæ®µéš ===
  - id: "detailed-report-compilation"
    name: "è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç·¨çº‚"
    phase: "report_creation"
    github_job: "report-compilation"
    type: "compilation"
    implementation: "ai"
    duration_minutes: 4
    dependencies: ["executive-summary-generation"]
    parallel_group: "report_parallel"
    
    github_steps:
      - name: "Compile detailed report"
        shell: "bash"
        script: |
          echo "ğŸ“‘ Compiling detailed report..."
          
          mkdir -p .outputs/reports
          
          # è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã®ç·¨çº‚
          claude-code --prompt "ä»¥ä¸‹ã®å…¨ã¦ã®åˆ†æçµæœã‚’çµ±åˆã—ã¦ã€åŒ…æ‹¬çš„ãªè©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
          
          ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼: $(cat $EXECUTIVE_SUMMARY_JSON_FILE)
          åŒ…æ‹¬çš„çµ±åˆçµæœ: $(cat $COMPREHENSIVE_SYNTHESIS_FILE)
          å…¨ã¦ã®åˆ†æãƒ‡ãƒ¼ã‚¿: {
            \"content_analysis\": $(cat $CONTENT_ANALYSIS_FILE),
            \"sentiment_analysis\": $(cat $SENTIMENT_ANALYSIS_FILE),
            \"trend_analysis\": $(cat $TREND_ANALYSIS_FILE),
            \"final_articles\": $(cat $DEDUPLICATED_ARTICLES_FILE)
          }
          
          ãƒ¬ãƒãƒ¼ãƒˆè¦ä»¶:
          - æ§‹é€ åŒ–ã•ã‚ŒãŸèª­ã¿ã‚„ã™ã„å½¢å¼
          - æ ¹æ‹ ã¨ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ˜ç¤º
          - è¦–è¦šçš„è¦ç´ ã®ææ¡ˆ
          - å‚è€ƒæ–‡çŒ®ãƒ»æƒ…å ±æºã®è¨˜è¼‰
          - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã®å…·ä½“åŒ–
          
          Markdownå½¢å¼ã§è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š" > .temp-detailed-prompt.txt
          
          cat >> .temp-detailed-prompt.txt << 'EOF'
          
          # ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æè©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ
          
          ## ğŸ“‹ ãƒ¬ãƒãƒ¼ãƒˆæ¦‚è¦
          - **åˆ†æãƒˆãƒ”ãƒƒã‚¯**: [ãƒˆãƒ”ãƒƒã‚¯]
          - **åˆ†ææœŸé–“**: [æœŸé–“]
          - **åˆ†æå®Œäº†æ—¥æ™‚**: [æ—¥æ™‚]
          - **åé›†è¨˜äº‹æ•°**: [æ•°]
          - **åˆ†æä¿¡é ¼åº¦**: [ãƒ¬ãƒ™ãƒ«]
          
          ## ğŸ¯ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼
          [ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ã®å†…å®¹]
          
          ## ğŸ“Š åˆ†ææ‰‹æ³•ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
          ### åˆ†æã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
          - ãƒ‡ãƒ¼ã‚¿åé›†æ–¹æ³•
          - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°åŸºæº–  
          - åˆ†æãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
          
          ### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
          - ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹
          - æƒ…å ±æºã®ä¿¡é ¼æ€§è©•ä¾¡
          - ãƒ‡ãƒ¼ã‚¿å“è³ªæŒ‡æ¨™
          
          ## ğŸ” è©³ç´°åˆ†æçµæœ
          
          ### 1. ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æ
          #### ä¸»è¦ãƒ†ãƒ¼ãƒ
          [ãƒ†ãƒ¼ãƒåˆ¥ã®è©³ç´°åˆ†æ]
          
          #### æ™‚ç³»åˆ—åˆ†æ
          [æ™‚é–“è»¸ã§ã®å¤‰åŒ–åˆ†æ]
          
          #### é–¢ä¿‚è€…åˆ†æ
          [ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã®è©³ç´°åˆ†æ]
          
          ### 2. ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆãƒ»æ„Ÿæƒ…åˆ†æ
          #### å…¨ä½“çš„å‚¾å‘
          [ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã®å…¨ä½“åƒ]
          
          #### æ™‚ç³»åˆ—å¤‰åŒ–
          [æ„Ÿæƒ…ã®å¤‰åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³]
          
          #### ãƒˆãƒ”ãƒƒã‚¯åˆ¥æ„Ÿæƒ…
          [ãƒ†ãƒ¼ãƒã”ã¨ã®æ„Ÿæƒ…åˆ†æ]
          
          ### 3. ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
          #### è­˜åˆ¥ã•ã‚ŒãŸãƒˆãƒ¬ãƒ³ãƒ‰
          [ç™ºè¦‹ã•ã‚ŒãŸãƒˆãƒ¬ãƒ³ãƒ‰ã®è©³ç´°]
          
          #### ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
          [ç¹°ã‚Šè¿”ã—ãƒ‘ã‚¿ãƒ¼ãƒ³ã®åˆ†æ]
          
          #### äºˆæ¸¬çš„æ´å¯Ÿ
          [å°†æ¥äºˆæ¸¬ã¨å«æ„]
          
          ## ğŸ“ˆ å½±éŸ¿åº¦è©•ä¾¡
          
          ### çŸ­æœŸçš„å½±éŸ¿ (1-3ãƒ¶æœˆ)
          - [å½±éŸ¿é …ç›®1]
          - [å½±éŸ¿é …ç›®2]
          
          ### ä¸­æœŸçš„å½±éŸ¿ (3-12ãƒ¶æœˆ)
          - [å½±éŸ¿é …ç›®1]
          - [å½±éŸ¿é …ç›®2]
          
          ### é•·æœŸçš„å½±éŸ¿ (1å¹´ä»¥ä¸Š)
          - [å½±éŸ¿é …ç›®1]
          - [å½±éŸ¿é …ç›®2]
          
          ## âš ï¸ ãƒªã‚¹ã‚¯åˆ†æ
          
          ### é«˜ç¢ºç‡ãƒªã‚¹ã‚¯
          | ãƒªã‚¹ã‚¯é …ç›® | ç¢ºç‡ | å½±éŸ¿åº¦ | å¯¾å¿œå„ªå…ˆåº¦ |
          |-----------|------|--------|-----------|
          | [ãƒªã‚¹ã‚¯1] | [%] | [ãƒ¬ãƒ™ãƒ«] | [å„ªå…ˆåº¦] |
          
          ### ä½ç¢ºç‡é«˜å½±éŸ¿ãƒªã‚¹ã‚¯
          [Black Swançš„ãƒªã‚¹ã‚¯ã®åˆ†æ]
          
          ## ğŸ’¡ æ©Ÿä¼šåˆ†æ
          
          ### çŸ­æœŸæ©Ÿä¼š
          - [æ©Ÿä¼š1ã®è©³ç´°]
          - [æ©Ÿä¼š2ã®è©³ç´°]
          
          ### æˆ¦ç•¥çš„æ©Ÿä¼š
          - [é•·æœŸçš„æ©Ÿä¼šã®åˆ†æ]
          
          ## ğŸ¯ æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
          
          ### å³åº§ã®å¯¾å¿œ (24-48æ™‚é–“)
          1. **[ã‚¢ã‚¯ã‚·ãƒ§ãƒ³1]**
             - å®Ÿè¡Œè€…: [æ‹…å½“è€…]
             - æœŸé™: [æ—¥æ™‚]
             - æœŸå¾…åŠ¹æœ: [åŠ¹æœ]
          
          ### çŸ­æœŸå¯¾å¿œ (1-2é€±é–“)
          1. **[ã‚¢ã‚¯ã‚·ãƒ§ãƒ³2]**
             - å®Ÿè¡Œè¨ˆç”»: [è©³ç´°]
             - ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶: [è¦ä»¶]
             - æˆåŠŸæŒ‡æ¨™: [KPI]
          
          ### ä¸­é•·æœŸå¯¾å¿œ (1-3ãƒ¶æœˆ)
          1. **[æˆ¦ç•¥çš„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³]**
             - æˆ¦ç•¥çš„ç›®çš„: [ç›®çš„]
             - å®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚º: [æ®µéš]
             - æŠ•è³‡å¯¾åŠ¹æœ: [ROI]
          
          ## ğŸ“Š ç›£è¦–ãƒ»è¿½è·¡æ¨å¥¨äº‹é …
          
          ### é‡è¦æŒ‡æ¨™ (KPI)
          - [æŒ‡æ¨™1]: [æ¸¬å®šæ–¹æ³•]
          - [æŒ‡æ¨™2]: [æ¸¬å®šæ–¹æ³•]
          
          ### ç›£è¦–é »åº¦
          - æ—¥æ¬¡ç›£è¦–: [ç›£è¦–é …ç›®]
          - é€±æ¬¡ãƒ¬ãƒ“ãƒ¥ãƒ¼: [ãƒ¬ãƒ“ãƒ¥ãƒ¼é …ç›®]
          - æœˆæ¬¡è©•ä¾¡: [è©•ä¾¡é …ç›®]
          
          ## ğŸ“š å‚è€ƒæƒ…å ±ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
          
          ### ä¸»è¦å‚è€ƒè¨˜äº‹
          [é‡è¦è¨˜äº‹ã®ãƒªã‚¹ãƒˆ]
          
          ### ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è©³ç´°
          [ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è©³ç´°æƒ…å ±]
          
          ### è¿½åŠ èª¿æŸ»æ¨å¥¨é ˜åŸŸ
          [ã•ã‚‰ãªã‚‹èª¿æŸ»ãŒæœ‰ç›Šãªé ˜åŸŸ]
          
          ## ğŸ“… æ¬¡å›åˆ†æè¨ˆç”»
          
          ### å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
          - æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: [æ—¥ä»˜]
          - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹é ˜åŸŸ: [é‡ç‚¹é …ç›®]
          - è¿½åŠ ãƒ‡ãƒ¼ã‚¿åé›†: [åé›†è¨ˆç”»]
          
          ### ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—é …ç›®
          1. [ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—1]
          2. [ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—2]
          
          ---
          
          ## ğŸ“Š ä»˜éŒ²: ãƒ‡ãƒ¼ã‚¿è©³ç´°
          
          ### A. åé›†è¨˜äº‹ä¸€è¦§
          [è¨˜äº‹ã®è©³ç´°ãƒªã‚¹ãƒˆ]
          
          ### B. åˆ†ææ‰‹æ³•è©³ç´°
          [ä½¿ç”¨ã—ãŸåˆ†ææ‰‹æ³•ã®èª¬æ˜]
          
          ### C. çµ±è¨ˆãƒ‡ãƒ¼ã‚¿
          [æ•°å€¤çš„åˆ†æçµæœ]
          
          ---
          
          **ãƒ¬ãƒãƒ¼ãƒˆä½œæˆè€…**: AI ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æã‚·ã‚¹ãƒ†ãƒ   
          **ä½œæˆæ—¥æ™‚**: [æ—¥æ™‚]  
          **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
          **æ©Ÿå¯†ãƒ¬ãƒ™ãƒ«**: [ãƒ¬ãƒ™ãƒ«]
          EOF
          
          # è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
          claude-code --prompt "$(cat .temp-detailed-prompt.txt)" > .outputs/reports/detailed-news-analysis-report.md
          
          # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
          rm .temp-detailed-prompt.txt
          
          echo "âœ… Detailed report compilation completed"

  - id: "data-visualization-suggestions"
    name: "ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ææ¡ˆ"
    phase: "report_creation"
    github_job: "visualization-suggestions"
    type: "planning"
    implementation: "ai"
    duration_minutes: 2
    dependencies: ["executive-summary-generation"]
    parallel_group: "report_parallel"
    
    github_steps:
      - name: "Generate visualization suggestions"
        shell: "bash"
        script: |
          echo "ğŸ“Š Generating data visualization suggestions..."
          
          # ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ææ¡ˆ
          claude-code --prompt "ä»¥ä¸‹ã®åˆ†æçµæœã«åŸºã¥ã„ã¦ã€åŠ¹æœçš„ãªãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã®ææ¡ˆã‚’è¡Œã£ã¦ãã ã•ã„ï¼š
          
          åŒ…æ‹¬çš„çµ±åˆçµæœ: $(cat $COMPREHENSIVE_SYNTHESIS_FILE)
          ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼: $(cat $EXECUTIVE_SUMMARY_JSON_FILE)
          
          å¯è¦–åŒ–ã®ç›®çš„:
          - è¤‡é›‘ãªæƒ…å ±ã®ç†è§£ä¿ƒé€²
          - æ„æ€æ±ºå®šæ”¯æ´
          - ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
          - ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ˜ç¢ºåŒ–
          
          ä»¥ä¸‹ã®å½¢å¼ã§JSONã§å›ç­”ã—ã¦ãã ã•ã„ï¼š
          {
            \"visualization_plan\": {
              \"creation_timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"target_audience\": [\"å¯¾è±¡èª­è€…å±¤\"],
              \"visualization_goals\": [\"å¯è¦–åŒ–ã®ç›®æ¨™\"],
              \"complexity_level\": \"executive|analyst|technical\"
            },
            \"recommended_charts\": [
              {
                \"chart_type\": \"timeline|bar_chart|pie_chart|line_graph|heat_map|network_diagram|scatter_plot\",
                \"title\": \"ãƒãƒ£ãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«\",
                \"purpose\": \"å¯è¦–åŒ–ã®ç›®çš„\",
                \"data_source\": \"ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹\",
                \"key_insights\": [\"ã“ã®ãƒãƒ£ãƒ¼ãƒˆã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æ´å¯Ÿ\"],
                \"implementation_priority\": \"high|medium|low\",
                \"technical_requirements\": [\"æŠ€è¡“è¦ä»¶\"],
                \"interactive_features\": [\"ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ã®ææ¡ˆ\"]
              }
            ],
            \"dashboard_concept\": {
              \"dashboard_title\": \"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å\",
              \"layout_structure\": \"ä¸Šä¸‹é…ç½®|å·¦å³é…ç½®|ã‚°ãƒªãƒƒãƒ‰é…ç½®\",
              \"key_metrics_display\": [\"ä¸»è¦æŒ‡æ¨™ã®è¡¨ç¤ºæ–¹æ³•\"],
              \"color_scheme\": \"é…è‰²æ–¹é‡\",
              \"update_frequency\": \"æ›´æ–°é »åº¦\"
            },
            \"infographic_suggestions\": [
              {
                \"infographic_theme\": \"ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ†ãƒ¼ãƒ\",
                \"target_format\": \"poster|social_media|presentation|web\",
                \"key_messages\": [\"ä¸»è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\"],
                \"visual_elements\": [\"è¦–è¦šè¦ç´ \"],
                \"design_approach\": \"minimalist|detailed|engaging|professional\"
              }
            ],
            \"presentation_slides\": {
              \"slide_sequence\": [\"ã‚¹ãƒ©ã‚¤ãƒ‰é †åºã®ææ¡ˆ\"],
              \"attention_grabbers\": [\"æ³¨æ„ã‚’å¼•ãè¦ç´ \"],
              \"storytelling_flow\": \"ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ†ãƒªãƒ³ã‚°ã®æµã‚Œ\",
              \"call_to_action_placement\": \"è¡Œå‹•å–šèµ·ã®é…ç½®\"
            }
          }" > .logs/synthesis-summarization/visualization-suggestions.json
          
          VISUALIZATION_SUGGESTIONS=$(cat .logs/synthesis-summarization/visualization-suggestions.json)
          echo "VISUALIZATION_SUGGESTIONS_FILE=.logs/synthesis-summarization/visualization-suggestions.json" >> $GITHUB_ENV
          
          echo "âœ… Data visualization suggestions completed"

  - id: "final-package-assembly"
    name: "æœ€çµ‚é…ä¿¡ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸çµ„ç«‹"
    phase: "report_creation"
    github_job: "package-assembly"
    type: "integration"
    implementation: "script"
    duration_minutes: 2
    dependencies: ["detailed-report-compilation", "data-visualization-suggestions"]
    parallel_group: null
    
    github_steps:
      - name: "Assemble final delivery package"
        shell: "bash"
        script: |
          echo "ğŸ“¦ Assembling final delivery package..."
          
          mkdir -p .final-output/{reports,summaries,data,assets}
          
          # ãƒ¡ã‚¤ãƒ³ãƒ¬ãƒãƒ¼ãƒˆé¡ã‚’ã‚³ãƒ”ãƒ¼
          cp .outputs/reports/detailed-news-analysis-report.md .final-output/reports/
          cp .logs/synthesis-summarization/executive-summary.md .final-output/summaries/
          cp .logs/synthesis-summarization/executive-summary.json .final-output/summaries/
          
          # åˆ†æãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼
          cp $COMPREHENSIVE_SYNTHESIS_FILE .final-output/data/comprehensive-analysis.json
          cp $CONTENT_ANALYSIS_FILE .final-output/data/content-analysis.json
          cp $SENTIMENT_ANALYSIS_FILE .final-output/data/sentiment-analysis.json
          cp $TREND_ANALYSIS_FILE .final-output/data/trend-analysis.json
          cp $VISUALIZATION_SUGGESTIONS_FILE .final-output/data/visualization-suggestions.json
          
          # ã‚½ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼
          cp $DEDUPLICATED_ARTICLES_FILE .final-output/data/source-articles.json
          
          # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
          cat > .final-output/package-info.json << EOF
          {
            \"package_info\": {
              \"created_at\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
              \"workflow_run_id\": \"${{ github.run_id }}\",
              \"analysis_topic\": $(echo "$TOPIC_ANALYSIS" | jq '.primary_topic'),
              \"total_articles_analyzed\": $(jq -r '.deduplication_results.final_count // 0' $DEDUPLICATED_ARTICLES_FILE),
              \"analysis_confidence\": $(jq -r '.analysis_summary.confidence_level // 0' $CONTENT_ANALYSIS_FILE),
              \"package_completeness\": \"complete\"
            },
            \"contents\": {
              \"reports\": [
                \"detailed-news-analysis-report.md\"
              ],
              \"summaries\": [
                \"executive-summary.md\",
                \"executive-summary.json\"
              ],
              \"data_files\": [
                \"comprehensive-analysis.json\",
                \"content-analysis.json\",
                \"sentiment-analysis.json\",
                \"trend-analysis.json\",
                \"visualization-suggestions.json\",
                \"source-articles.json\"
              ]
            },
            \"usage_guide\": {
              \"start_with\": \"executive-summary.md\",
              \"detailed_analysis\": \"detailed-news-analysis-report.md\",
              \"raw_data\": \"data/ ãƒ•ã‚©ãƒ«ãƒ€å†…ã®JSONãƒ•ã‚¡ã‚¤ãƒ«\",
              \"visualization\": \"visualization-suggestions.json\"
            },
            \"quality_metrics\": {
              \"information_completeness\": $(jq -r '.synthesis_summary.information_completeness // 0' $COMPREHENSIVE_SYNTHESIS_FILE),
              \"analysis_depth\": $(jq -r '.analysis_summary.analysis_depth // "standard"' $CONTENT_ANALYSIS_FILE),
              \"source_credibility\": $(jq -r '.verification_summary.overall_collection_reliability // 0' $CREDIBILITY_ASSESSMENT_FILE)
            }
          }
          EOF
          
          # READMEä½œæˆ
          cat > .final-output/README.md << 'EOF'
          # ğŸ“° AI ãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
          
          ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯åŒ…æ‹¬çš„ãªãƒ‹ãƒ¥ãƒ¼ã‚¹åˆ†æçµæœãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
          
          ## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
          
          ### ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆ
          - `reports/detailed-news-analysis-report.md` - è©³ç´°åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
          - `summaries/executive-summary.md` - ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼
          
          ### ğŸ“ˆ ãƒ‡ãƒ¼ã‚¿
          - `data/comprehensive-analysis.json` - åŒ…æ‹¬çš„åˆ†æçµæœ
          - `data/content-analysis.json` - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ†æãƒ‡ãƒ¼ã‚¿
          - `data/sentiment-analysis.json` - ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æãƒ‡ãƒ¼ã‚¿
          - `data/trend-analysis.json` - ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æãƒ‡ãƒ¼ã‚¿
          - `data/source-articles.json` - ã‚½ãƒ¼ã‚¹è¨˜äº‹ãƒ‡ãƒ¼ã‚¿
          - `data/visualization-suggestions.json` - å¯è¦–åŒ–ææ¡ˆ
          
          ## ğŸš€ åˆ©ç”¨é–‹å§‹
          
          1. **æ¦‚è¦æŠŠæ¡**: `summaries/executive-summary.md` ã‹ã‚‰é–‹å§‹
          2. **è©³ç´°ç¢ºèª**: `reports/detailed-news-analysis-report.md` ã§è©³ç´°ã‚’ç¢ºèª
          3. **ãƒ‡ãƒ¼ã‚¿åˆ†æ**: `data/` ãƒ•ã‚©ãƒ«ãƒ€ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã§æ·±æ˜ã‚Šåˆ†æ
          4. **å¯è¦–åŒ–**: `visualization-suggestions.json` ã‚’å‚è€ƒã«å›³è¡¨ä½œæˆ
          
          ## ğŸ“Š å“è³ªæŒ‡æ¨™
          
          - **æƒ…å ±å®Œå…¨æ€§**: è¨˜è¼‰ã•ã‚Œã‚‹
          - **åˆ†ææ·±åº¦**: è¨˜è¼‰ã•ã‚Œã‚‹  
          - **ã‚½ãƒ¼ã‚¹ä¿¡é ¼æ€§**: è¨˜è¼‰ã•ã‚Œã‚‹
          
          ---
          *Generated by AI News Analysis System*
          EOF
          
          # ZIPãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
          cd .final-output && zip -r ../news-analysis-package.zip . && cd ..
          
          # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚µã‚¤ã‚ºå–å¾—
          PACKAGE_SIZE=$(stat -f%z "news-analysis-package.zip" 2>/dev/null || stat -c%s "news-analysis-package.zip" 2>/dev/null || echo "unknown")
          
          echo "Package size: $PACKAGE_SIZE bytes"
          echo "âœ… Final package assembly completed"
          
    success_links:
      package_download: "${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}/artifacts"
      executive_summary: "${{ github.server_url }}/${{ github.repository }}/blob/main/.final-output/summaries/executive-summary.md"
      detailed_report: "${{ github.server_url }}/${{ github.repository }}/blob/main/.final-output/reports/detailed-news-analysis-report.md"
      analysis_data: "${{ github.server_url }}/${{ github.repository }}/blob/main/.final-output/data/"

# å®Ÿè¡Œãƒ•ãƒ­ãƒ¼è¨­è¨ˆ
execution_flow:
  - stage: 0
    name: "äº‹å‰ãƒ†ã‚¹ãƒˆ"
    parallel: false
    jobs: ["connectivity-test"]
    
  - stage: 1
    name: "æƒ…å ±åé›†"
    parallel: false
    jobs: ["topic-extraction", "news-collection"]
    
  - stage: 2
    name: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°"
    parallel: true
    jobs: ["relevance-filtering", "credibility-check"]
    then:
      parallel: false
      jobs: ["duplicate-removal"]
      
  - stage: 3
    name: "åˆ†æå‡¦ç†"
    parallel: true
    jobs: ["content-analysis", "sentiment-analysis"]
    then:
      parallel: false
      jobs: ["trend-analysis"]
      
  - stage: 4
    name: "çµ±åˆè¦ç´„"
    parallel: false
    jobs: ["information-synthesis", "executive-summary"]
    
  - stage: 5
    name: "ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ"
    parallel: true
    jobs: ["report-compilation", "visualization-suggestions"]
    then:
      parallel: false
      jobs: ["package-assembly"]

# å…¨ä½“çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
global_error_handling:
  max_retries: 2
  retry_delay_seconds: 25
  critical_failure_notification: true
  fallback_mode: "simplified_analysis"
  
# æˆåŠŸåŸºæº–
success_criteria:
  - "å°‘ãªãã¨ã‚‚5ä»¶ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ãŒåé›†ã•ã‚Œã¦ã„ã‚‹"
  - "åŒ…æ‹¬çš„ãªåˆ†æãŒå®Œäº†ã—ã¦ã„ã‚‹"
  - "ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹"
  - "è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹"
  - "é…ä¿¡ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒçµ„ã¿ç«‹ã¦ã‚‰ã‚Œã¦ã„ã‚‹"

# ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆä¿æŒ
artifacts:
  - name: "news-analysis-logs"
    path: ".logs/"
    retention_days: 14
  - name: "news-analysis-outputs"  
    path: ".outputs/"
    retention_days: 60
  - name: "final-news-package"
    path: ".final-output/"
    retention_days: 90
  - name: "news-package-zip"
    path: "news-analysis-package.zip"
    retention_days: 90