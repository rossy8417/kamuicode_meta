name: "Podcast Creation Workflow"
run-name: "ðŸŽ™ï¸ Creating podcast: ${{ github.event.inputs.podcast_topic || 'Podcast Production' }}"

on:
  workflow_dispatch:
    inputs:
      podcast_topic:
        description: 'ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã®ãƒ†ãƒ¼ãƒžãƒ»è©±é¡Œ'
        required: true
        default: 'ãƒ†ãƒƒã‚¯æ¥­ç•Œãƒˆãƒ¬ãƒ³ãƒ‰ã€ãƒ“ã‚¸ãƒã‚¹æˆåŠŸäº‹ä¾‹ã€æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„'
        type: string
      podcast_format:
        description: 'ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆå½¢å¼'
        required: true
        type: choice
        options:
        - interview
        - solo_commentary
        - discussion_panel
        - storytelling
        - educational_series
        - news_summary
        default: 'solo_commentary'
      episode_length:
        description: 'æƒ³å®šã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é•·'
        required: true
        type: choice
        options:
        - short_5_10min
        - standard_15_30min
        - long_45_60min
        - extended_60plus_min
        default: 'standard_15_30min'
      target_audience:
        description: 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè´è¡†'
        required: true
        type: choice
        options:
        - general_public
        - professionals
        - students
        - entrepreneurs
        - tech_enthusiasts
        - specific_industry
        default: 'professionals'
      content_tone:
        description: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒˆãƒ¼ãƒ³'
        required: true
        type: choice
        options:
        - conversational
        - professional
        - educational
        - entertaining
        - inspirational
        - analytical
        default: 'conversational'
      audio_quality:
        description: 'éŸ³å£°å“è³ªãƒ¬ãƒ™ãƒ«'
        required: true
        type: choice
        options:
        - broadcast_quality
        - high_quality
        - standard_quality
        - basic_quality
        default: 'high_quality'
      music_style:
        description: 'BGMãƒ»ã‚¸ãƒ³ã‚°ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«'
        required: true
        type: choice
        options:
        - corporate_professional
        - upbeat_energetic
        - calm_ambient
        - modern_electronic
        - classical_elegant
        - no_music
        default: 'corporate_professional'
      episode_structure:
        description: 'ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ§‹æˆ'
        required: true
        type: choice
        options:
        - intro_main_outro
        - segmented_topics
        - interview_format
        - story_narrative
        - educational_modules
        default: 'intro_main_outro'
      language_style:
        description: 'è¨€èªžã‚¹ã‚¿ã‚¤ãƒ«'
        required: false
        type: choice
        options:
        - formal_polite
        - casual_friendly
        - technical_precise
        - storytelling_engaging
        - educational_clear
        default: 'casual_friendly'

permissions:
  contents: write
  issues: read
  actions: read

env:
  CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}

jobs:
  # Phase 1: äº‹å‰ãƒ†ã‚¹ãƒˆæ®µéšŽ
  connectivity-test:
    runs-on: ubuntu-latest
    outputs:
      services_ready: ${{ steps.test.outputs.services_ready }}
      music_gen_available: ${{ steps.test.outputs.music_gen_available }}
      voice_gen_available: ${{ steps.test.outputs.voice_gen_available }}
    steps:
      - name: Test podcast audio generation services
        id: test
        run: |
          echo "ðŸŽ™ï¸ Testing podcast audio generation services..."
          
          mkdir -p generated/logs/connectivity-tests
          
          # éŸ³æ¥½ç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆBGMãƒ»ã‚¸ãƒ³ã‚°ãƒ«ç”¨ï¼‰
          echo "Testing music generation for BGM and jingles..."
          if timeout 120 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "podcast intro music test" > generated/logs/connectivity-tests/music-test.log 2>&1; then
            MUSIC_GEN_STATUS="success"
            echo "âœ… Music Generation (Lyria): Available"
          else
            MUSIC_GEN_STATUS="failed"
            echo "âš ï¸ Music Generation: Not available - will use music-free format"
          fi
          
          # éŸ³å£°ç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
          echo "Testing voice generation for narration..."
          if timeout 90 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp v2a-fal-metavoice-v1 --test > generated/logs/connectivity-tests/voice-test.log 2>&1; then
            VOICE_GEN_STATUS="success"
            echo "âœ… Voice Generation (MetaVoice): Available"
          else
            VOICE_GEN_STATUS="failed"
            echo "âš ï¸ Voice Generation: Not available - will create script-only format"
          fi
          
          # Set outputs
          echo "services_ready=true" >> $GITHUB_OUTPUT
          echo "music_gen_available=$MUSIC_GEN_STATUS" >> $GITHUB_OUTPUT
          echo "voice_gen_available=$VOICE_GEN_STATUS" >> $GITHUB_OUTPUT
          
          echo "ðŸŽ™ï¸ Podcast audio services connectivity tests completed"

  # Phase 2: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¼ç”»æ®µéšŽ
  content-planning:
    needs: connectivity-test
    runs-on: ubuntu-latest
    outputs:
      planning_ready: ${{ steps.plan.outputs.planning_ready }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Develop podcast content strategy and episode structure
        id: plan
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“‹ Developing podcast content strategy and episode structure..."
          
          mkdir -p generated/logs/content-planning
          
          PODCAST_TOPIC="${{ github.event.inputs.podcast_topic }}"
          PODCAST_FORMAT="${{ github.event.inputs.podcast_format }}"
          EPISODE_LENGTH="${{ github.event.inputs.episode_length }}"
          
          echo "Podcast topic: $PODCAST_TOPIC"
          echo "Format: $PODCAST_FORMAT"
          echo "Episode length: $EPISODE_LENGTH"
          
          # Claude Code ã§ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆä¼ç”»ãƒ»æ§‹æˆè¨­è¨ˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æˆ¦ç•¥ã¨ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ§‹æˆã‚’JSONå½¢å¼ã§è¨­è¨ˆã—ã¦ãã ã•ã„ï¼š

          ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ†ãƒ¼ãƒž: $PODCAST_TOPIC
          å½¢å¼: $PODCAST_FORMAT
          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é•·: $EPISODE_LENGTH
          ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè´è¡†: ${{ github.event.inputs.target_audience }}
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒˆãƒ¼ãƒ³: ${{ github.event.inputs.content_tone }}
          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ§‹æˆ: ${{ github.event.inputs.episode_structure }}

          è©³ç´°ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ§‹æˆã€è©±é¡Œã®æµã‚Œã€è´è¡†ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥ã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > generated/logs/content-planning/content-strategy.json
          
          echo "planning_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“‹ Content planning completed"

  # Phase 3: å°æœ¬ãƒ»ã‚·ãƒŠãƒªã‚ªä½œæˆæ®µéšŽ
  script-development:
    needs: content-planning
    runs-on: ubuntu-latest
    outputs:
      script_ready: ${{ steps.develop.outputs.script_ready }}
    steps:
      - name: Create detailed podcast script and narration
        id: develop
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“ Creating detailed podcast script and narration..."
          
          mkdir -p generated/logs/script-development
          
          CONTENT_TONE="${{ github.event.inputs.content_tone }}"
          LANGUAGE_STYLE="${{ github.event.inputs.language_style }}"
          
          # å°æœ¬ãƒ»ã‚·ãƒŠãƒªã‚ªä½œæˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€è©³ç´°ãªãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆå°æœ¬ã¨ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

          ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.podcast_topic }}
          å½¢å¼: ${{ github.event.inputs.podcast_format }}
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒˆãƒ¼ãƒ³: $CONTENT_TONE
          è¨€èªžã‚¹ã‚¿ã‚¤ãƒ«: $LANGUAGE_STYLE
          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é•·: ${{ github.event.inputs.episode_length }}

          ã‚¤ãƒ³ãƒˆãƒ­ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€ã‚¢ã‚¦ãƒˆãƒ­ã‚’å«ã‚€å®Œå…¨ãªå°æœ¬ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚éŸ³æ¥½ã‚­ãƒ¥ãƒ¼ã‚„åŠ¹æžœéŸ³ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚‚å«ã‚ã¦ãã ã•ã„ã€‚" > generated/logs/script-development/podcast-script.json
          
          echo "script_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“ Script development completed"

  # Phase 4: éŸ³æ¥½ãƒ»ã‚¸ãƒ³ã‚°ãƒ«åˆ¶ä½œæ®µéšŽ
  music-production:
    needs: [connectivity-test, script-development]
    runs-on: ubuntu-latest
    outputs:
      music_ready: ${{ steps.produce.outputs.music_ready }}
    steps:
      - name: Generate podcast music and audio elements
        id: produce
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸŽµ Generating podcast music and audio elements..."
          
          mkdir -p generated/logs/music-production
          
          MUSIC_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.music_gen_available }}"
          MUSIC_STYLE="${{ github.event.inputs.music_style }}"
          
          if [ "$MUSIC_GEN_AVAILABLE" = "success" ] && [ "$MUSIC_STYLE" != "no_music" ]; then
            echo "Generating intro music..."
            INTRO_PROMPT="podcast intro music, $MUSIC_STYLE style, professional, engaging, 10-15 seconds"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "$INTRO_PROMPT" > generated/logs/music-production/intro-music.json 2>&1 || echo "Intro music generation failed"
            
            echo "Generating background music..."
            BG_PROMPT="podcast background music, $MUSIC_STYLE style, subtle, non-intrusive, ambient"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "$BG_PROMPT" > generated/logs/music-production/background-music.json 2>&1 || echo "Background music generation failed"
            
            echo "Generating outro music..."
            OUTRO_PROMPT="podcast outro music, $MUSIC_STYLE style, conclusive, professional, 10-15 seconds"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "$OUTRO_PROMPT" > generated/logs/music-production/outro-music.json 2>&1 || echo "Outro music generation failed"
            
            echo "âœ… Podcast music generated"
          else
            echo "âš ï¸ Music generation not available or disabled - creating music-free format"
            echo '{"music_type": "none", "style": "voice_only"}' > generated/logs/music-production/no-music-plan.json
          fi
          
          echo "music_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸŽµ Music production completed"

  # Phase 5: éŸ³å£°ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶ä½œæ®µéšŽ
  voice-narration:
    needs: [connectivity-test, script-development]
    runs-on: ubuntu-latest
    outputs:
      narration_ready: ${{ steps.narrate.outputs.narration_ready }}
    steps:
      - name: Generate voice narration for podcast content
        id: narrate
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ—£ï¸ Generating voice narration for podcast content..."
          
          mkdir -p generated/logs/voice-narration
          
          VOICE_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.voice_gen_available }}"
          
          if [ "$VOICE_GEN_AVAILABLE" = "success" ]; then
            echo "Generating main content narration..."
            
            # ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºï¼ˆç°¡ç´ åŒ–ï¼‰
            NARRATION_TEXT="${{ github.event.inputs.podcast_topic }} ã«é–¢ã™ã‚‹ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¸ã‚ˆã†ã“ãã€‚æœ¬æ—¥ã¯"
            
            # ãƒ¡ã‚¤ãƒ³ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯å°æœ¬ã‹ã‚‰é©åˆ‡ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºï¼‰
            echo "Generating voice narration from script..."
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp v2a-fal-metavoice-v1 --text "$NARRATION_TEXT" > generated/logs/voice-narration/main-narration.json 2>&1 || echo "Main narration generation failed"
            
            echo "âœ… Voice narration generated"
          else
            echo "âš ï¸ Voice generation not available - creating text-only script format"
            echo '{"narration_type": "text_only", "format": "script_based"}' > generated/logs/voice-narration/text-only-plan.json
          fi
          
          echo "narration_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ—£ï¸ Voice narration completed"

  # Phase 6: ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªçµ±åˆãƒ»ç·¨é›†æ®µéšŽ
  audio-integration:
    needs: [music-production, voice-narration]
    runs-on: ubuntu-latest
    outputs:
      integration_ready: ${{ steps.integrate.outputs.integration_ready }}
    steps:
      - name: Plan audio integration and editing workflow
        id: integrate
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ”§ Planning audio integration and editing workflow..."
          
          mkdir -p generated/logs/audio-integration
          
          # ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªçµ±åˆæˆ¦ç•¥
          claude-code --prompt "ä»¥ä¸‹ã®ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆåˆ¶ä½œè¦ç´ ã‚’çµ±åˆã™ã‚‹è©³ç´°ãªç·¨é›†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’JSONå½¢å¼ã§è¨­è¨ˆã—ã¦ãã ã•ã„ï¼š

          éŸ³å£°å“è³ªãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.audio_quality }}
          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é•·: ${{ github.event.inputs.episode_length }}
          éŸ³æ¥½ã‚¹ã‚¿ã‚¤ãƒ«: ${{ github.event.inputs.music_style }}
          å½¢å¼: ${{ github.event.inputs.podcast_format }}

          éŸ³é‡ãƒãƒ©ãƒ³ã‚¹ã€ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ»ã‚¢ã‚¦ãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“ã®åˆ‡ã‚Šæ›¿ãˆã€éŸ³è³ªæœ€é©åŒ–ã®å…·ä½“çš„ãªæŒ‡ç¤ºã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > generated/logs/audio-integration/integration-plan.json
          
          echo "integration_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ”§ Audio integration planning completed"

  # Phase 7: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»é…ä¿¡æº–å‚™æ®µéšŽ
  metadata-distribution:
    needs: audio-integration
    runs-on: ubuntu-latest
    outputs:
      metadata_ready: ${{ steps.metadata.outputs.metadata_ready }}
    steps:
      - name: Generate podcast metadata and distribution package
        id: metadata
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“Š Generating podcast metadata and distribution package..."
          
          mkdir -p generated/logs/metadata-distribution
          
          # ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ»é…ä¿¡æˆ¦ç•¥
          claude-code --prompt "ä»¥ä¸‹ã®ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæƒ…å ±ã«åŸºã¥ã„ã¦ã€é…ä¿¡ç”¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ãƒžãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          ãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.podcast_topic }}
          ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè´è¡†: ${{ github.event.inputs.target_audience }}
          å½¢å¼: ${{ github.event.inputs.podcast_format }}
          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰é•·: ${{ github.event.inputs.episode_length }}

          ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜Žæ–‡ã€ã‚¿ã‚°ã€ã‚«ãƒ†ã‚´ãƒªã€é…ä¿¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æˆ¦ç•¥ã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > generated/logs/metadata-distribution/distribution-strategy.json
          
          echo "metadata_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“Š Metadata and distribution preparation completed"

  # Phase 8: æœ€çµ‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
  final-packaging:
    needs: [content-planning, script-development, music-production, voice-narration, audio-integration, metadata-distribution]
    runs-on: ubuntu-latest
    steps:
      - name: Create comprehensive podcast production package
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“¦ Creating comprehensive podcast production package..."
          
          mkdir -p .final-output/{planning,script,audio,integration,distribution}
          
          # ä¼ç”»ãƒ»è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
          cp generated/logs/content-planning/content-strategy.json .final-output/planning/ 2>/dev/null || true
          
          # å°æœ¬ãƒ»ã‚·ãƒŠãƒªã‚ª
          cp generated/logs/script-development/podcast-script.json .final-output/script/ 2>/dev/null || true
          
          # ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªç´ æ
          mkdir -p .final-output/audio/{music,narration}
          cp generated/logs/music-production/*.json .final-output/audio/music/ 2>/dev/null || true
          cp generated/logs/voice-narration/*.json .final-output/audio/narration/ 2>/dev/null || true
          
          # çµ±åˆãƒ»ç·¨é›†è³‡æ–™
          cp generated/logs/audio-integration/integration-plan.json .final-output/integration/ 2>/dev/null || true
          
          # é…ä¿¡ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
          cp generated/logs/metadata-distribution/distribution-strategy.json .final-output/distribution/ 2>/dev/null || true
          
          # ãƒžã‚¹ã‚¿ãƒ¼ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆæƒ…å ±
          cat > .final-output/podcast-master.json << EOF
          {
            "project_info": {
              "project_name": "Podcast Creation & Production",
              "created_at": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
              "github_run_id": "${{ github.run_id }}",
              "production_type": "podcast_episode_creation"
            },
            "input_parameters": {
              "podcast_topic": "${{ github.event.inputs.podcast_topic }}",
              "podcast_format": "${{ github.event.inputs.podcast_format }}",
              "episode_length": "${{ github.event.inputs.episode_length }}",
              "target_audience": "${{ github.event.inputs.target_audience }}",
              "content_tone": "${{ github.event.inputs.content_tone }}",
              "audio_quality": "${{ github.event.inputs.audio_quality }}",
              "music_style": "${{ github.event.inputs.music_style }}",
              "episode_structure": "${{ github.event.inputs.episode_structure }}",
              "language_style": "${{ github.event.inputs.language_style }}"
            },
            "deliverables": {
              "content_planning": {
                "strategy_document": "planning/content-strategy.json"
              },
              "script_materials": {
                "full_script": "script/podcast-script.json"
              },
              "audio_assets": {
                "music_elements": "audio/music/",
                "voice_narration": "audio/narration/"
              },
              "production_guides": {
                "integration_plan": "integration/integration-plan.json",
                "distribution_strategy": "distribution/distribution-strategy.json"
              }
            }
          }
          EOF
          
          # ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆåˆ¶ä½œã‚¬ã‚¤ãƒ‰
          cat > .final-output/PODCAST_PRODUCTION_GUIDE.md << 'EOF'
          # ãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆåˆ¶ä½œãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰
          
          ## ðŸŽ™ï¸ åˆ¶ä½œæ¦‚è¦
          - åˆ¶ä½œæ‰‹æ³•: AIç”Ÿæˆã«ã‚ˆã‚‹çµ±åˆãƒãƒƒãƒ‰ã‚­ãƒ£ã‚¹ãƒˆåˆ¶ä½œ
          - å“è³ªãƒ¬ãƒ™ãƒ«: ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆå“è³ªå¯¾å¿œ
          - é…ä¿¡æœ€é©åŒ–: ãƒžãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
          
          ## ðŸ“‹ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¼ç”»
          - ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰æ§‹æˆè¨­è¨ˆ
          - ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè´è¡†åˆ†æž
          - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æˆ¦ç•¥ç­–å®š
          - ç¶™ç¶šå¯èƒ½æ€§æ¤œè¨Ž
          
          ## ðŸ“ å°æœ¬ãƒ»ã‚·ãƒŠãƒªã‚ª
          - è©³ç´°ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
          - ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥æ§‹æˆ
          - ãƒˆãƒ¼ã‚¯ãƒ»ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ
          - éŸ³éŸ¿ã‚­ãƒ¥ãƒ¼æŒ‡ç¤º
          
          ## ðŸŽµ ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªåˆ¶ä½œ
          - BGMãƒ»ã‚¸ãƒ³ã‚°ãƒ«ç”Ÿæˆ
          - éŸ³å£°ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶ä½œ
          - éŸ³è³ªãƒ»éŸ³é‡æœ€é©åŒ–
          - ãƒžãƒ«ãƒãƒˆãƒ©ãƒƒã‚¯çµ±åˆ
          
          ## ðŸ”§ ç·¨é›†ãƒ»ãƒã‚¹ãƒˆãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³
          - ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªçµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
          - éŸ³éŸ¿åŠ¹æžœãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          - å“è³ªç®¡ç†ãƒ»æ¤œè¨¼
          - ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆæœ€é©åŒ–
          
          ## ðŸ“Š é…ä¿¡ãƒ»ãƒžãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°
          - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æˆ¦ç•¥
          - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æœ€é©åŒ–
          - è´è¡†ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ
          - ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹æ´»ç”¨
          
          ## ðŸš€ ç¶™ç¶šçš„æ”¹å–„
          - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åˆ†æž
          - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ªå‘ä¸Š
          - æŠ€è¡“çš„æœ€é©åŒ–
          - è´è¡†æ‹¡å¤§æˆ¦ç•¥
          EOF
          
          echo "ðŸ“¦ Final podcast production packaging completed"
          
      - name: Upload Podcast Production Package
        uses: actions/upload-artifact@v4
        with:
          name: podcast-production-${{ github.run_number }}
          path: .final-output/
          retention-days: 30