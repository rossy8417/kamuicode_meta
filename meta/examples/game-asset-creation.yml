name: "Game Asset Creation Workflow"
run-name: "ðŸŽ® Creating game assets: ${{ github.event.inputs.game_concept || 'Game Asset Production' }}"

on:
  workflow_dispatch:
    inputs:
      game_concept:
        description: 'ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»ä¸–ç•Œè¦³'
        required: true
        default: 'ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼RPGã€ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ä¸–ç•Œã€ã‹ã‚ã„ã„å‹•ç‰©ã€æœªæ¥éƒ½å¸‚'
        type: string
      game_genre:
        description: 'ã‚²ãƒ¼ãƒ ã‚¸ãƒ£ãƒ³ãƒ«'
        required: true
        type: choice
        options:
        - action_adventure
        - rpg_fantasy
        - puzzle_casual
        - strategy_simulation
        - platformer_arcade
        - shooter_combat
        default: 'rpg_fantasy'
      asset_type_priority:
        description: 'ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œå„ªå…ˆåº¦'
        required: true
        type: choice
        options:
        - characters_focus
        - environments_focus
        - ui_interface_focus
        - props_items_focus
        - effects_audio_focus
        - balanced_all
        default: 'balanced_all'
      art_style:
        description: 'ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«'
        required: true
        type: choice
        options:
        - pixel_art
        - cartoon_stylized
        - realistic_3d
        - minimalist_abstract
        - anime_manga
        - retro_vintage
        default: 'cartoon_stylized'
      target_platform:
        description: 'ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ '
        required: true
        type: choice
        options:
        - mobile_games
        - pc_desktop
        - console_games
        - web_browser
        - vr_ar_platforms
        - multi_platform
        default: 'multi_platform'
      resolution_quality:
        description: 'è§£åƒåº¦ãƒ»å“è³ªãƒ¬ãƒ™ãƒ«'
        required: true
        type: choice
        options:
        - low_res_retro
        - standard_hd
        - high_res_4k
        - ultra_quality
        - scalable_vector
        default: 'standard_hd'
      color_palette:
        description: 'ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ'
        required: true
        type: choice
        options:
        - vibrant_colorful
        - dark_moody
        - pastel_soft
        - monochrome_minimal
        - neon_cyber
        - earth_natural
        default: 'vibrant_colorful'
      animation_needs:
        description: 'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¦ä»¶'
        required: true
        type: choice
        options:
        - static_assets_only
        - basic_animations
        - complex_sequences
        - interactive_animations
        - cinematic_quality
        default: 'basic_animations'
      asset_quantity:
        description: 'ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œé‡'
        required: true
        type: choice
        options:
        - prototype_minimal
        - demo_essential
        - alpha_moderate
        - beta_comprehensive
        - full_production
        default: 'demo_essential'

permissions:
  contents: write
  issues: read
  actions: read

env:
  CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}

jobs:
  # Phase 1: äº‹å‰ãƒ†ã‚¹ãƒˆæ®µéšŽ
  connectivity-test:
    runs-on: ubuntu-latest
    outputs:
      services_ready: ${{ steps.test.outputs.services_ready }}
      image_gen_available: ${{ steps.test.outputs.image_gen_available }}
      threed_gen_available: ${{ steps.test.outputs.threed_gen_available }}
      audio_gen_available: ${{ steps.test.outputs.audio_gen_available }}
    steps:
      - name: Test game asset generation services
        id: test
        run: |
          echo "ðŸŽ® Testing game asset generation services..."
          
          mkdir -p .logs/connectivity-tests
          
          # 2Dç”»åƒç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»èƒŒæ™¯ç”¨ï¼‰
          echo "Testing 2D image generation for game assets..."
          if timeout 90 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "game character asset test" > .logs/connectivity-tests/2d-asset-test.log 2>&1; then
            IMAGE_GEN_STATUS="success"
            echo "âœ… 2D Image Generation: Available"
          else
            IMAGE_GEN_STATUS="failed"
            echo "âš ï¸ 2D Image Generation: Not available - will use concept art approach"
          fi
          
          # 3Dãƒ¢ãƒ‡ãƒ«ç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ3Dã‚¢ã‚»ãƒƒãƒˆç”¨ï¼‰
          echo "Testing 3D model generation for game objects..."
          if timeout 180 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp i2i3d-fal-hunyuan3d-v21 --test > .logs/connectivity-tests/3d-asset-test.log 2>&1; then
            THREED_GEN_STATUS="success"
            echo "âœ… 3D Model Generation: Available"
          else
            THREED_GEN_STATUS="failed"
            echo "âš ï¸ 3D Model Generation: Not available - will focus on 2D assets"
          fi
          
          # éŸ³æ¥½ãƒ»åŠ¹æžœéŸ³ç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆ
          echo "Testing audio generation for game sounds..."
          if timeout 120 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "game background music test" > .logs/connectivity-tests/audio-test.log 2>&1; then
            AUDIO_GEN_STATUS="success"
            echo "âœ… Audio Generation: Available"
          else
            AUDIO_GEN_STATUS="failed"
            echo "âš ï¸ Audio Generation: Not available - will focus on visual assets"
          fi
          
          # Set outputs
          echo "services_ready=true" >> $GITHUB_OUTPUT
          echo "image_gen_available=$IMAGE_GEN_STATUS" >> $GITHUB_OUTPUT
          echo "threed_gen_available=$THREED_GEN_STATUS" >> $GITHUB_OUTPUT
          echo "audio_gen_available=$AUDIO_GEN_STATUS" >> $GITHUB_OUTPUT
          
          echo "ðŸŽ® Game asset services connectivity tests completed"

  # Phase 2: ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ–‡æ›¸ä½œæˆæ®µéšŽ
  game-design-document:
    needs: connectivity-test
    runs-on: ubuntu-latest
    outputs:
      design_ready: ${{ steps.design.outputs.design_ready }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Create comprehensive game design document
        id: design
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“‹ Creating comprehensive game design document..."
          
          mkdir -p .logs/game-design
          
          GAME_CONCEPT="${{ github.event.inputs.game_concept }}"
          GAME_GENRE="${{ github.event.inputs.game_genre }}"
          ART_STYLE="${{ github.event.inputs.art_style }}"
          
          echo "Game concept: $GAME_CONCEPT"
          echo "Genre: $GAME_GENRE"
          echo "Art style: $ART_STYLE"
          
          # Claude Code ã§ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ–‡æ›¸ä½œæˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€åŒ…æ‹¬çš„ãªã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ–‡æ›¸ã¨ã‚¢ã‚»ãƒƒãƒˆä»•æ§˜ã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆ: $GAME_CONCEPT
          ã‚¸ãƒ£ãƒ³ãƒ«: $GAME_GENRE
          ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«: $ART_STYLE
          ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${{ github.event.inputs.target_platform }}
          ã‚¢ã‚»ãƒƒãƒˆå„ªå…ˆåº¦: ${{ github.event.inputs.asset_type_priority }}
          ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ: ${{ github.event.inputs.color_palette }}

          ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­è¨ˆã€ç’°å¢ƒãƒ»èƒŒæ™¯ã€UIè¦ç´ ã€å°é“å…·ã€éŸ³éŸ¿è¦ç´ ã®è©³ç´°ãªä»•æ§˜ã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > .logs/game-design/game-design-document.json
          
          echo "design_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“‹ Game design document creation completed"

  # Phase 3: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œæ®µéšŽ
  character-assets:
    needs: [connectivity-test, game-design-document]
    runs-on: ubuntu-latest
    outputs:
      characters_ready: ${{ steps.create.outputs.characters_ready }}
    steps:
      - name: Generate character assets and designs
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ‘¾ Generating character assets and designs..."
          
          mkdir -p .logs/character-assets
          
          IMAGE_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.image_gen_available }}"
          ART_STYLE="${{ github.event.inputs.art_style }}"
          COLOR_PALETTE="${{ github.event.inputs.color_palette }}"
          
          if [ "$IMAGE_GEN_AVAILABLE" = "success" ]; then
            echo "Generating main character designs..."
            MAIN_CHAR_PROMPT="${{ github.event.inputs.game_concept }}, main character design, $ART_STYLE style, $COLOR_PALETTE colors, game asset, character sheet"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$MAIN_CHAR_PROMPT" > .logs/character-assets/main-character.json 2>&1 || echo "Main character generation failed"
            
            echo "Generating NPC character designs..."
            NPC_PROMPT="${{ github.event.inputs.game_concept }}, NPC character design, $ART_STYLE style, supporting character, game asset"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$NPC_PROMPT" > .logs/character-assets/npc-characters.json 2>&1 || echo "NPC character generation failed"
            
            echo "Generating enemy/antagonist designs..."
            ENEMY_PROMPT="${{ github.event.inputs.game_concept }}, enemy character design, $ART_STYLE style, antagonist, game asset"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$ENEMY_PROMPT" > .logs/character-assets/enemy-characters.json 2>&1 || echo "Enemy character generation failed"
            
            echo "âœ… Character assets generated"
          else
            echo "âš ï¸ Image generation not available - creating character concept descriptions"
            echo '{"asset_type": "concept_descriptions", "art_style": "${{ github.event.inputs.art_style }}"}' > .logs/character-assets/character-concepts.json
          fi
          
          echo "characters_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ‘¾ Character assets creation completed"

  # Phase 4: ç’°å¢ƒãƒ»èƒŒæ™¯ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œæ®µéšŽ
  environment-assets:
    needs: [connectivity-test, game-design-document]
    runs-on: ubuntu-latest
    outputs:
      environments_ready: ${{ steps.create.outputs.environments_ready }}
    steps:
      - name: Generate environment and background assets
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸŒ Generating environment and background assets..."
          
          mkdir -p .logs/environment-assets
          
          IMAGE_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.image_gen_available }}"
          
          if [ "$IMAGE_GEN_AVAILABLE" = "success" ]; then
            echo "Generating main game environment..."
            ENV_PROMPT="${{ github.event.inputs.game_concept }}, game environment, ${{ github.event.inputs.art_style }} style, background scene, game level design"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$ENV_PROMPT" > .logs/environment-assets/main-environment.json 2>&1 || echo "Main environment generation failed"
            
            echo "Generating secondary environments..."
            SEC_ENV_PROMPT="${{ github.event.inputs.game_concept }}, secondary game area, ${{ github.event.inputs.art_style }} style, alternate environment"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$SEC_ENV_PROMPT" > .logs/environment-assets/secondary-environments.json 2>&1 || echo "Secondary environment generation failed"
            
            echo "Generating environmental props..."
            PROPS_PROMPT="${{ github.event.inputs.game_concept }}, environmental props, ${{ github.event.inputs.art_style }} style, game objects, decorative elements"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$PROPS_PROMPT" > .logs/environment-assets/environment-props.json 2>&1 || echo "Environmental props generation failed"
            
            echo "âœ… Environment assets generated"
          else
            echo "âš ï¸ Image generation not available - creating environment concept descriptions"
            echo '{"asset_type": "environment_concepts", "game_genre": "${{ github.event.inputs.game_genre }}"}' > .logs/environment-assets/environment-concepts.json
          fi
          
          echo "environments_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸŒ Environment assets creation completed"

  # Phase 5: 3Dã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œæ®µéšŽ
  threed-assets:
    needs: [connectivity-test, character-assets]
    runs-on: ubuntu-latest
    outputs:
      threed_ready: ${{ steps.create.outputs.threed_ready }}
    steps:
      - name: Generate 3D game assets
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ§Š Generating 3D game assets..."
          
          mkdir -p .logs/threed-assets
          
          THREED_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.threed_gen_available }}"
          
          if [ "$THREED_GEN_AVAILABLE" = "success" ]; then
            echo "Generating 3D props from 2D references..."
            
            # 2Dã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆã‹ã‚‰3Dãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ
            CHAR_REF_FILE=$(ls .logs/character-assets/main-character*.json 2>/dev/null | head -1)
            
            if [ -n "$CHAR_REF_FILE" ]; then
              CHAR_IMAGE_PATH=$(jq -r '.image_url // .file_path // "none"' "$CHAR_REF_FILE" 2>/dev/null)
              
              if [ "$CHAR_IMAGE_PATH" != "none" ]; then
                echo "Generating 3D character model from 2D reference..."
                
                claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp i2i3d-fal-hunyuan3d-v21 --image-path "$CHAR_IMAGE_PATH" > .logs/threed-assets/3d-character-model.json 2>&1 || echo "3D character generation failed"
              fi
            fi
            
            echo "âœ… 3D assets generated"
          else
            echo "âš ï¸ 3D generation not available - focusing on 2D asset pipeline"
            echo '{"asset_type": "2d_only", "platform": "${{ github.event.inputs.target_platform }}"}' > .logs/threed-assets/2d-focus-plan.json
          fi
          
          echo "threed_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ§Š 3D assets creation completed"

  # Phase 6: UIãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹åˆ¶ä½œæ®µéšŽ
  ui-interface:
    needs: game-design-document
    runs-on: ubuntu-latest
    outputs:
      ui_ready: ${{ steps.create.outputs.ui_ready }}
    steps:
      - name: Generate UI and interface elements
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ–¥ï¸ Generating UI and interface elements..."
          
          mkdir -p .logs/ui-interface
          
          # UIãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
          claude-code --prompt "ä»¥ä¸‹ã®ã‚²ãƒ¼ãƒ è¦ä»¶ã«åŸºã¥ã„ã¦ã€UIãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          ã‚²ãƒ¼ãƒ ã‚¸ãƒ£ãƒ³ãƒ«: ${{ github.event.inputs.game_genre }}
          ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${{ github.event.inputs.target_platform }}
          ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«: ${{ github.event.inputs.art_style }}
          è§£åƒåº¦å“è³ª: ${{ github.event.inputs.resolution_quality }}

          ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ã€ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤UIã€ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã€è¨­å®šç”»é¢ã€ãƒœã‚¿ãƒ³ãƒ»ã‚¢ã‚¤ã‚³ãƒ³ã®è©³ç´°ä»•æ§˜ã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > .logs/ui-interface/ui-design.json
          
          echo "ui_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ–¥ï¸ UI interface creation completed"

  # Phase 7: éŸ³éŸ¿ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œæ®µéšŽ
  audio-assets:
    needs: [connectivity-test, game-design-document]
    runs-on: ubuntu-latest
    outputs:
      audio_ready: ${{ steps.create.outputs.audio_ready }}
    steps:
      - name: Generate audio assets and sound effects
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ”Š Generating audio assets and sound effects..."
          
          mkdir -p .logs/audio-assets
          
          AUDIO_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.audio_gen_available }}"
          
          if [ "$AUDIO_GEN_AVAILABLE" = "success" ]; then
            echo "Generating background music..."
            BGM_PROMPT="${{ github.event.inputs.game_concept }}, game background music, ${{ github.event.inputs.game_genre }} style, atmospheric, looping"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "$BGM_PROMPT" > .logs/audio-assets/background-music.json 2>&1 || echo "Background music generation failed"
            
            echo "Generating menu music..."
            MENU_PROMPT="${{ github.event.inputs.game_concept }}, game menu music, welcoming, engaging, ${{ github.event.inputs.game_genre }} genre"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2m-google-lyria --prompt "$MENU_PROMPT" > .logs/audio-assets/menu-music.json 2>&1 || echo "Menu music generation failed"
            
            echo "âœ… Audio assets generated"
          else
            echo "âš ï¸ Audio generation not available - creating audio specification document"
            echo '{"asset_type": "audio_specifications", "game_genre": "${{ github.event.inputs.game_genre }}"}' > .logs/audio-assets/audio-specs.json
          fi
          
          echo "audio_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ”Š Audio assets creation completed"

  # Phase 8: æœ€çµ‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
  final-packaging:
    needs: [game-design-document, character-assets, environment-assets, threed-assets, ui-interface, audio-assets]
    runs-on: ubuntu-latest
    steps:
      - name: Create comprehensive game asset package
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“¦ Creating comprehensive game asset package..."
          
          mkdir -p .final-output/{design,characters,environments,threed,ui,audio}
          
          # ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ–‡æ›¸
          cp .logs/game-design/game-design-document.json .final-output/design/ 2>/dev/null || true
          
          # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆ
          cp .logs/character-assets/*.json .final-output/characters/ 2>/dev/null || true
          
          # ç’°å¢ƒãƒ»èƒŒæ™¯ã‚¢ã‚»ãƒƒãƒˆ
          cp .logs/environment-assets/*.json .final-output/environments/ 2>/dev/null || true
          
          # 3Dã‚¢ã‚»ãƒƒãƒˆ
          cp .logs/threed-assets/*.json .final-output/threed/ 2>/dev/null || true
          
          # UIãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          cp .logs/ui-interface/*.json .final-output/ui/ 2>/dev/null || true
          
          # éŸ³éŸ¿ã‚¢ã‚»ãƒƒãƒˆ
          cp .logs/audio-assets/*.json .final-output/audio/ 2>/dev/null || true
          
          # ãƒžã‚¹ã‚¿ãƒ¼ã‚²ãƒ¼ãƒ ã‚¢ã‚»ãƒƒãƒˆæƒ…å ±
          cat > .final-output/game-asset-master.json << EOF
          {
            "project_info": {
              "project_name": "Game Asset Creation & Production",
              "created_at": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
              "github_run_id": "${{ github.run_id }}",
              "production_type": "game_asset_generation"
            },
            "input_parameters": {
              "game_concept": "${{ github.event.inputs.game_concept }}",
              "game_genre": "${{ github.event.inputs.game_genre }}",
              "asset_type_priority": "${{ github.event.inputs.asset_type_priority }}",
              "art_style": "${{ github.event.inputs.art_style }}",
              "target_platform": "${{ github.event.inputs.target_platform }}",
              "resolution_quality": "${{ github.event.inputs.resolution_quality }}",
              "color_palette": "${{ github.event.inputs.color_palette }}",
              "animation_needs": "${{ github.event.inputs.animation_needs }}",
              "asset_quantity": "${{ github.event.inputs.asset_quantity }}"
            },
            "deliverables": {
              "design_documents": {
                "game_design_document": "design/game-design-document.json"
              },
              "visual_assets": {
                "character_designs": "characters/",
                "environment_backgrounds": "environments/",
                "threed_models": "threed/",
                "ui_interface_elements": "ui/"
              },
              "audio_assets": {
                "music_and_sounds": "audio/"
              }
            }
          }
          EOF
          
          # ã‚²ãƒ¼ãƒ ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œã‚¬ã‚¤ãƒ‰
          cat > .final-output/GAME_ASSET_GUIDE.md << 'EOF'
          # ã‚²ãƒ¼ãƒ ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰
          
          ## ðŸŽ® ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
          - åˆ¶ä½œæ‰‹æ³•: AIç”Ÿæˆã«ã‚ˆã‚‹çµ±åˆã‚²ãƒ¼ãƒ ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œ
          - å“è³ªãƒ¬ãƒ™ãƒ«: ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚²ãƒ¼ãƒ é–‹ç™ºå¯¾å¿œ
          - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœ€é©åŒ–: ãƒžãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
          
          ## ðŸ“‹ ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³
          - åŒ…æ‹¬çš„ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³æ–‡æ›¸
          - ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«çµ±ä¸€æŒ‡é‡
          - æŠ€è¡“ä»•æ§˜ãƒ»åˆ¶ç´„äº‹é …
          - ã‚¢ã‚»ãƒƒãƒˆå„ªå…ˆåº¦ãƒ»ãƒ­ãƒ¼ãƒ‰ãƒžãƒƒãƒ—
          
          ## ðŸ‘¾ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ã‚»ãƒƒãƒˆ
          - ãƒ¡ã‚¤ãƒ³ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­è¨ˆ
          - NPCãƒ»ã‚µãƒãƒ¼ãƒˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
          - æ•µã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»ãƒœã‚¹
          - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜
          
          ## ðŸŒ ç’°å¢ƒãƒ»èƒŒæ™¯ã‚¢ã‚»ãƒƒãƒˆ
          - ã‚²ãƒ¼ãƒ ä¸–ç•Œç’°å¢ƒè¨­è¨ˆ
          - ãƒ¬ãƒ™ãƒ«ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸èƒŒæ™¯
          - ç’°å¢ƒå°é“å…·ãƒ»è£…é£¾
          - ç’°å¢ƒã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ»ç…§æ˜Ž
          
          ## ðŸ§Š 3Dã‚¢ã‚»ãƒƒãƒˆãƒ»ãƒ¢ãƒ‡ãƒªãƒ³ã‚°
          - 3Dã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«
          - ç’°å¢ƒ3Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
          - ãƒ—ãƒ­ãƒƒãƒ—ã‚¹ãƒ»ã‚¢ã‚¤ãƒ†ãƒ 
          - ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ»ãƒžãƒ†ãƒªã‚¢ãƒ«
          
          ## ðŸ–¥ï¸ UIãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          - ã‚²ãƒ¼ãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­è¨ˆ
          - ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤UIè¦ç´ 
          - ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ãƒœã‚¿ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³
          - ãƒ¢ãƒã‚¤ãƒ«ãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—æœ€é©åŒ–
          
          ## ðŸ”Š éŸ³éŸ¿ãƒ»ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª
          - èƒŒæ™¯éŸ³æ¥½ãƒ»ãƒ†ãƒ¼ãƒžæ›²
          - åŠ¹æžœéŸ³ãƒ»ç’°å¢ƒéŸ³
          - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼éŸ³å£°
          - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚ªãƒ¼ãƒ‡ã‚£ã‚ª
          
          ## ðŸŽ¨ ã‚¢ãƒ¼ãƒˆãƒ»å“è³ªç®¡ç†
          - ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«çµ±ä¸€
          - å“è³ªåŸºæº–ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
          - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–
          - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
          
          ## ðŸš€ çµ±åˆãƒ»å®Ÿè£…
          - ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆ
          - ã‚¢ã‚»ãƒƒãƒˆæœ€é©åŒ–ãƒ»åœ§ç¸®
          - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»æ›´æ–°
          - ç¶™ç¶šçš„æ”¹å–„ãƒ»æ‹¡å¼µ
          EOF
          
          echo "ðŸ“¦ Final game asset packaging completed"
          
      - name: Upload Game Asset Package
        uses: actions/upload-artifact@v4
        with:
          name: game-asset-package-${{ github.run_number }}
          path: .final-output/
          retention-days: 30