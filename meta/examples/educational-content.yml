name: "Educational Content Creation Workflow"
run-name: "ðŸ“š Creating educational content: ${{ github.event.inputs.subject_topic || 'Educational Material' }}"

on:
  workflow_dispatch:
    inputs:
      subject_topic:
        description: 'æ•™è‚²ãƒ†ãƒ¼ãƒžãƒ»ç§‘ç›®'
        required: true
        default: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åŸºç¤Žã€ãƒ“ã‚¸ãƒã‚¹ã‚¹ã‚­ãƒ«ã€èªžå­¦å­¦ç¿’ã€ç§‘å­¦ãƒ»æ•°å­¦'
        type: string
      education_level:
        description: 'æ•™è‚²ãƒ¬ãƒ™ãƒ«ãƒ»å¯¾è±¡å¹´é½¢'
        required: true
        type: choice
        options:
        - elementary_kids
        - middle_school
        - high_school
        - university_college
        - professional_adult
        - general_public
        default: 'professional_adult'
      content_format:
        description: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å½¢å¼'
        required: true
        type: choice
        options:
        - interactive_course
        - video_tutorials
        - text_materials
        - quiz_assessments
        - practical_exercises
        - mixed_multimedia
        default: 'mixed_multimedia'
      learning_objective:
        description: 'å­¦ç¿’ç›®æ¨™'
        required: true
        type: choice
        options:
        - skill_acquisition
        - knowledge_transfer
        - certification_prep
        - awareness_building
        - problem_solving
        - creative_development
        default: 'skill_acquisition'
      difficulty_level:
        description: 'é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«'
        required: true
        type: choice
        options:
        - beginner_intro
        - intermediate_practical
        - advanced_expert
        - mixed_progressive
        default: 'intermediate_practical'
      content_length:
        description: 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç·é‡'
        required: true
        type: choice
        options:
        - short_workshop
        - standard_course
        - comprehensive_program
        - extensive_curriculum
        default: 'standard_course'
      teaching_method:
        description: 'æ•™æŽˆæ³•ãƒ»ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ'
        required: true
        type: choice
        options:
        - lecture_traditional
        - hands_on_practical
        - case_study_analysis
        - interactive_discussion
        - project_based_learning
        - gamified_engagement
        default: 'hands_on_practical'
      visual_style:
        description: 'ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«'
        required: true
        type: choice
        options:
        - professional_formal
        - friendly_approachable
        - modern_minimalist
        - colorful_engaging
        - academic_scholarly
        default: 'friendly_approachable'
      assessment_type:
        description: 'è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆæ–¹å¼'
        required: true
        type: choice
        options:
        - multiple_choice_quiz
        - practical_assignments
        - project_submission
        - peer_evaluation
        - self_assessment
        - no_formal_assessment
        default: 'practical_assignments'
      language_complexity:
        description: 'è¨€èªžãƒ»è¡¨ç¾ã®è¤‡é›‘ã•'
        required: false
        type: choice
        options:
        - simple_clear
        - technical_precise
        - conversational_friendly
        - academic_formal
        - multilingual_support
        default: 'conversational_friendly'

permissions:
  contents: write
  issues: read
  actions: read

env:
  CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}

jobs:
  # Phase 1: äº‹å‰ãƒ†ã‚¹ãƒˆæ®µéšŽ
  connectivity-test:
    runs-on: ubuntu-latest
    outputs:
      services_ready: ${{ steps.test.outputs.services_ready }}
      diagram_gen_available: ${{ steps.test.outputs.diagram_gen_available }}
      video_gen_available: ${{ steps.test.outputs.video_gen_available }}
      content_gen_available: ${{ steps.test.outputs.content_gen_available }}
    steps:
      - name: Test educational content generation services
        id: test
        run: |
          echo "ðŸ“š Testing educational content generation services..."
          
          mkdir -p .logs/connectivity-tests
          
          # å›³è§£ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ç”Ÿæˆãƒ†ã‚¹ãƒˆ
          echo "Testing diagram and infographic generation..."
          if timeout 90 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "educational diagram infographic test" > .logs/connectivity-tests/diagram-test.log 2>&1; then
            DIAGRAM_GEN_STATUS="success"
            echo "âœ… Diagram Generation: Available"
          else
            DIAGRAM_GEN_STATUS="failed"
            echo "âš ï¸ Diagram Generation: Not available - will use text-based explanations"
          fi
          
          # æ•™è‚²å‹•ç”»ç”Ÿæˆãƒ†ã‚¹ãƒˆ
          echo "Testing educational video generation..."
          if timeout 120 claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2v-fal-veo3-fast --prompt "educational video content test" > .logs/connectivity-tests/edu-video-test.log 2>&1; then
            VIDEO_GEN_STATUS="success"
            echo "âœ… Educational Video Generation: Available"
          else
            VIDEO_GEN_STATUS="failed"
            echo "âš ï¸ Video Generation: Not available - will focus on static content"
          fi
          
          # Claude Code ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆãƒ†ã‚¹ãƒˆ
          echo "Testing educational content generation..."
          if timeout 30 claude-code --prompt "Test: Create a simple educational explanation about AI. Return 'CONTENT_SUCCESS' if working." > .logs/connectivity-tests/content-test.log 2>&1; then
            if grep -q "CONTENT_SUCCESS" .logs/connectivity-tests/content-test.log || grep -qi "artificial intelligence\|AI" .logs/connectivity-tests/content-test.log; then
              CONTENT_GEN_STATUS="success"
              echo "âœ… Educational Content Generation: Available"
            else
              CONTENT_GEN_STATUS="partial"
              echo "âš ï¸ Content Generation: Partial - response received but needs verification"
            fi
          else
            CONTENT_GEN_STATUS="failed"
            echo "âŒ Content Generation: Failed - will use template-based approach"
          fi
          
          # Set outputs
          echo "services_ready=true" >> $GITHUB_OUTPUT
          echo "diagram_gen_available=$DIAGRAM_GEN_STATUS" >> $GITHUB_OUTPUT
          echo "video_gen_available=$VIDEO_GEN_STATUS" >> $GITHUB_OUTPUT
          echo "content_gen_available=$CONTENT_GEN_STATUS" >> $GITHUB_OUTPUT
          
          echo "ðŸ“š Educational content services connectivity tests completed"

  # Phase 2: ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ è¨­è¨ˆæ®µéšŽ
  curriculum-design:
    needs: connectivity-test
    runs-on: ubuntu-latest
    outputs:
      curriculum_ready: ${{ steps.design.outputs.curriculum_ready }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Design comprehensive educational curriculum
        id: design
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“‹ Designing comprehensive educational curriculum..."
          
          mkdir -p .logs/curriculum-design
          
          SUBJECT_TOPIC="${{ github.event.inputs.subject_topic }}"
          EDUCATION_LEVEL="${{ github.event.inputs.education_level }}"
          LEARNING_OBJECTIVE="${{ github.event.inputs.learning_objective }}"
          
          echo "Subject topic: $SUBJECT_TOPIC"
          echo "Education level: $EDUCATION_LEVEL"
          echo "Learning objective: $LEARNING_OBJECTIVE"
          
          # Claude Code ã§ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ è¨­è¨ˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€åŒ…æ‹¬çš„ãªæ•™è‚²ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã¨å­¦ç¿’è¨­è¨ˆã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          æ•™è‚²ãƒ†ãƒ¼ãƒž: $SUBJECT_TOPIC
          æ•™è‚²ãƒ¬ãƒ™ãƒ«: $EDUCATION_LEVEL
          å­¦ç¿’ç›®æ¨™: $LEARNING_OBJECTIVE
          æ•™æŽˆæ³•: ${{ github.event.inputs.teaching_method }}
          é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.difficulty_level }}
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç·é‡: ${{ github.event.inputs.content_length }}

          å­¦ç¿’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆã€ã‚¹ã‚­ãƒ«ç¿’å¾—é †åºã€è©•ä¾¡æŒ‡æ¨™ã€å­¦ç¿’æˆæžœç›®æ¨™ã‚’å«ã‚€è©³ç´°ãªã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã‚’è¨­è¨ˆã—ã¦ãã ã•ã„ã€‚" > .logs/curriculum-design/curriculum-structure.json
          
          echo "curriculum_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“‹ Curriculum design completed"

  # Phase 3: æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆæ®µéšŽ
  content-creation:
    needs: curriculum-design
    runs-on: ubuntu-latest
    outputs:
      content_ready: ${{ steps.create.outputs.content_ready }}
    steps:
      - name: Create detailed educational content materials
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“ Creating detailed educational content materials..."
          
          mkdir -p .logs/content-creation
          
          CONTENT_FORMAT="${{ github.event.inputs.content_format }}"
          LANGUAGE_COMPLEXITY="${{ github.event.inputs.language_complexity }}"
          
          # æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€è©³ç´°ãªæ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨æ•™æã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

          æ•™è‚²ãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.subject_topic }}
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å½¢å¼: $CONTENT_FORMAT
          è¨€èªžè¤‡é›‘ã•: $LANGUAGE_COMPLEXITY
          å¯¾è±¡ãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.education_level }}
          æ•™æŽˆæ³•: ${{ github.event.inputs.teaching_method }}

          ãƒ¬ãƒƒã‚¹ãƒ³æ§‹æˆã€æ¦‚å¿µèª¬æ˜Žã€å®Ÿä¾‹ãƒ»ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ã€æ¼”ç¿’å•é¡Œã‚’å«ã‚€åŒ…æ‹¬çš„ãªæ•™æã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚" > .logs/content-creation/educational-content.json
          
          echo "content_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“ Content creation completed"

  # Phase 4: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ•™æåˆ¶ä½œæ®µéšŽ
  visual-materials:
    needs: [connectivity-test, content-creation]
    runs-on: ubuntu-latest
    outputs:
      visuals_ready: ${{ steps.create.outputs.visuals_ready }}
    steps:
      - name: Generate visual educational materials
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸŽ¨ Generating visual educational materials..."
          
          mkdir -p .logs/visual-materials
          
          DIAGRAM_GEN_AVAILABLE="${{ needs.connectivity-test.outputs.diagram_gen_available }}"
          VISUAL_STYLE="${{ github.event.inputs.visual_style }}"
          
          if [ "$DIAGRAM_GEN_AVAILABLE" = "success" ]; then
            echo "Generating educational diagrams..."
            DIAGRAM_PROMPT="${{ github.event.inputs.subject_topic }}, educational diagram, infographic, $VISUAL_STYLE style, clear explanation, teaching aid"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$DIAGRAM_PROMPT" > .logs/visual-materials/educational-diagrams.json 2>&1 || echo "Educational diagram generation failed"
            
            echo "Generating concept illustrations..."
            CONCEPT_PROMPT="${{ github.event.inputs.subject_topic }}, concept illustration, educational visual, $VISUAL_STYLE style, learning support"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$CONCEPT_PROMPT" > .logs/visual-materials/concept-illustrations.json 2>&1 || echo "Concept illustration generation failed"
            
            echo "Generating process flowcharts..."
            FLOWCHART_PROMPT="${{ github.event.inputs.subject_topic }}, process flowchart, step-by-step guide, $VISUAL_STYLE style, educational flow"
            
            claude-code --mcp-config=.claude/mcp-kamuicode.json --mcp t2i-fal-imagen4-fast --prompt "$FLOWCHART_PROMPT" > .logs/visual-materials/process-flowcharts.json 2>&1 || echo "Flowchart generation failed"
            
            echo "âœ… Visual educational materials generated"
          else
            echo "âš ï¸ Visual generation not available - creating text-based visual descriptions"
            echo '{"visual_type": "text_descriptions", "style": "${{ github.event.inputs.visual_style }}"}' > .logs/visual-materials/text-visual-plan.json
          fi
          
          echo "visuals_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸŽ¨ Visual materials creation completed"

  # Phase 5: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ®µéšŽ
  interactive-content:
    needs: content-creation
    runs-on: ubuntu-latest
    outputs:
      interactive_ready: ${{ steps.create.outputs.interactive_ready }}
    steps:
      - name: Design interactive learning elements
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "âš¡ Designing interactive learning elements..."
          
          mkdir -p .logs/interactive-content
          
          # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å­¦ç¿’è¦ç´ è¨­è¨ˆ
          claude-code --prompt "ä»¥ä¸‹ã®æ•™è‚²è¦ä»¶ã«åŸºã¥ã„ã¦ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå­¦ç¿’è¦ç´ ã¨æ´»å‹•ã‚’è¨­è¨ˆã—ã¦JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ï¼š

          æ•™è‚²ãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.subject_topic }}
          æ•™æŽˆæ³•: ${{ github.event.inputs.teaching_method }}
          è©•ä¾¡æ–¹å¼: ${{ github.event.inputs.assessment_type }}
          é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.difficulty_level }}

          ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ¼”ç¿’ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£ã€ã‚°ãƒ«ãƒ¼ãƒ—æ´»å‹•ã®è©³ç´°è¨­è¨ˆã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > .logs/interactive-content/interactive-elements.json
          
          echo "interactive_ready=true" >> $GITHUB_OUTPUT
          echo "âš¡ Interactive content design completed"

  # Phase 6: è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆä½œæˆæ®µéšŽ
  assessment-creation:
    needs: interactive-content
    runs-on: ubuntu-latest
    outputs:
      assessment_ready: ${{ steps.create.outputs.assessment_ready }}
    steps:
      - name: Create comprehensive assessment and testing materials
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“Š Creating comprehensive assessment and testing materials..."
          
          mkdir -p .logs/assessment-creation
          
          ASSESSMENT_TYPE="${{ github.event.inputs.assessment_type }}"
          
          # è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆæ•™æä½œæˆ
          claude-code --prompt "ä»¥ä¸‹ã®è¦ä»¶ã«åŸºã¥ã„ã¦ã€åŒ…æ‹¬çš„ãªå­¦ç¿’è©•ä¾¡ã¨ãƒ†ã‚¹ãƒˆæ•™æã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          æ•™è‚²ãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.subject_topic }}
          è©•ä¾¡æ–¹å¼: $ASSESSMENT_TYPE
          å­¦ç¿’ç›®æ¨™: ${{ github.event.inputs.learning_objective }}
          é›£æ˜“åº¦ãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.difficulty_level }}

          çŸ¥è­˜ç¢ºèªãƒ†ã‚¹ãƒˆã€å®ŸæŠ€è©•ä¾¡ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆèª²é¡Œã€è‡ªå·±è©•ä¾¡ãƒ„ãƒ¼ãƒ«ã‚’å«ã‚€å¤šæ§˜ãªè©•ä¾¡æ–¹æ³•ã‚’è¨­è¨ˆã—ã¦ãã ã•ã„ã€‚" > .logs/assessment-creation/assessment-materials.json
          
          echo "assessment_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“Š Assessment creation completed"

  # Phase 7: å­¦ç¿’ã‚¬ã‚¤ãƒ‰ãƒ»ã‚µãƒãƒ¼ãƒˆè³‡æ–™æ®µéšŽ
  learning-support:
    needs: assessment-creation
    runs-on: ubuntu-latest
    outputs:
      support_ready: ${{ steps.create.outputs.support_ready }}
    steps:
      - name: Generate learning guides and support materials
        id: create
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“– Generating learning guides and support materials..."
          
          mkdir -p .logs/learning-support
          
          # å­¦ç¿’ã‚¬ã‚¤ãƒ‰ãƒ»ã‚µãƒãƒ¼ãƒˆè³‡æ–™ä½œæˆ
          claude-code --prompt "ä»¥ä¸‹ã®æ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«å¯¾ã—ã¦ã€å­¦ç¿’è€…å‘ã‘ã‚¬ã‚¤ãƒ‰ã¨ã‚µãƒãƒ¼ãƒˆè³‡æ–™ã‚’JSONå½¢å¼ã§ä½œæˆã—ã¦ãã ã•ã„ï¼š

          æ•™è‚²ãƒ†ãƒ¼ãƒž: ${{ github.event.inputs.subject_topic }}
          å¯¾è±¡ãƒ¬ãƒ™ãƒ«: ${{ github.event.inputs.education_level }}
          ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç·é‡: ${{ github.event.inputs.content_length }}
          å­¦ç¿’ç›®æ¨™: ${{ github.event.inputs.learning_objective }}

          å­¦ç¿’è¨ˆç”»ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€é€²æ—ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ã‚’å«ã‚ã¦ãã ã•ã„ã€‚" > .logs/learning-support/support-materials.json
          
          echo "support_ready=true" >> $GITHUB_OUTPUT
          echo "ðŸ“– Learning support materials creation completed"

  # Phase 8: æœ€çµ‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ
  final-packaging:
    needs: [curriculum-design, content-creation, visual-materials, interactive-content, assessment-creation, learning-support]
    runs-on: ubuntu-latest
    steps:
      - name: Create comprehensive educational content package
        env:
          CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
        run: |
          echo "ðŸ“¦ Creating comprehensive educational content package..."
          
          mkdir -p .final-output/{curriculum,content,visuals,interactive,assessment,support}
          
          # ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ è¨­è¨ˆæ–‡æ›¸
          cp .logs/curriculum-design/curriculum-structure.json .final-output/curriculum/ 2>/dev/null || true
          
          # æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„
          cp .logs/content-creation/educational-content.json .final-output/content/ 2>/dev/null || true
          
          # ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ•™æ
          cp .logs/visual-materials/*.json .final-output/visuals/ 2>/dev/null || true
          
          # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ 
          cp .logs/interactive-content/interactive-elements.json .final-output/interactive/ 2>/dev/null || true
          
          # è©•ä¾¡ãƒ»ãƒ†ã‚¹ãƒˆæ•™æ
          cp .logs/assessment-creation/assessment-materials.json .final-output/assessment/ 2>/dev/null || true
          
          # å­¦ç¿’ã‚µãƒãƒ¼ãƒˆè³‡æ–™
          cp .logs/learning-support/support-materials.json .final-output/support/ 2>/dev/null || true
          
          # ãƒžã‚¹ã‚¿ãƒ¼æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æƒ…å ±
          cat > .final-output/educational-content-master.json << EOF
          {
            "project_info": {
              "project_name": "Educational Content Creation & Development",
              "created_at": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
              "github_run_id": "${{ github.run_id }}",
              "content_type": "educational_materials_development"
            },
            "input_parameters": {
              "subject_topic": "${{ github.event.inputs.subject_topic }}",
              "education_level": "${{ github.event.inputs.education_level }}",
              "content_format": "${{ github.event.inputs.content_format }}",
              "learning_objective": "${{ github.event.inputs.learning_objective }}",
              "difficulty_level": "${{ github.event.inputs.difficulty_level }}",
              "content_length": "${{ github.event.inputs.content_length }}",
              "teaching_method": "${{ github.event.inputs.teaching_method }}",
              "visual_style": "${{ github.event.inputs.visual_style }}",
              "assessment_type": "${{ github.event.inputs.assessment_type }}",
              "language_complexity": "${{ github.event.inputs.language_complexity }}"
            },
            "deliverables": {
              "curriculum_design": {
                "structure_document": "curriculum/curriculum-structure.json"
              },
              "educational_content": {
                "main_materials": "content/educational-content.json"
              },
              "visual_materials": {
                "diagrams_illustrations": "visuals/"
              },
              "interactive_elements": {
                "engagement_activities": "interactive/interactive-elements.json"
              },
              "assessment_tools": {
                "evaluation_materials": "assessment/assessment-materials.json"
              },
              "support_resources": {
                "learning_guides": "support/support-materials.json"
              }
            }
          }
          EOF
          
          # æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œã‚¬ã‚¤ãƒ‰
          cat > .final-output/EDUCATIONAL_CONTENT_GUIDE.md << 'EOF'
          # æ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ¶ä½œãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰
          
          ## ðŸ“š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
          - åˆ¶ä½œæ‰‹æ³•: AIç”Ÿæˆã«ã‚ˆã‚‹çµ±åˆæ•™è‚²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–‹ç™º
          - å“è³ªãƒ¬ãƒ™ãƒ«: ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«æ•™è‚²æ©Ÿé–¢å¯¾å¿œ
          - å­¦ç¿’æœ€é©åŒ–: å¤šæ§˜ãªå­¦ç¿’ã‚¹ã‚¿ã‚¤ãƒ«å¯¾å¿œ
          
          ## ðŸ“‹ ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ è¨­è¨ˆ
          - åŒ…æ‹¬çš„å­¦ç¿’ãƒ—ãƒ­ã‚°ãƒ©ãƒ æ§‹é€ 
          - ã‚¹ã‚­ãƒ«ç¿’å¾—é †åºãƒ»ä¾å­˜é–¢ä¿‚
          - å­¦ç¿’æˆæžœç›®æ¨™ãƒ»è©•ä¾¡æŒ‡æ¨™
          - é©å¿œçš„å­¦ç¿’ãƒ‘ã‚¹è¨­è¨ˆ
          
          ## ðŸ“ æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–‹ç™º
          - æ®µéšŽçš„æ¦‚å¿µèª¬æ˜Ž
          - å®Ÿä¾‹ãƒ»ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£
          - å®Ÿè·µæ¼”ç¿’ãƒ»ãƒãƒ³ã‚ºã‚ªãƒ³
          - å¤šæ§˜ãªå­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹
          
          ## ðŸŽ¨ ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ•™æåˆ¶ä½œ
          - æ•™è‚²çš„å›³è§£ãƒ»ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯
          - æ¦‚å¿µç†è§£æ”¯æ´ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«
          - ãƒ—ãƒ­ã‚»ã‚¹ãƒ»ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
          - è¦–è¦šçš„å­¦ç¿’æ”¯æ´ãƒ„ãƒ¼ãƒ«
          
          ## âš¡ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å­¦ç¿’
          - ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆå‘ä¸Šæ´»å‹•
          - ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ä½“é¨“å­¦ç¿’
          - å”èª¿å­¦ç¿’ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¯ãƒ¼ã‚¯
          - ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ 
          
          ## ðŸ“Š å­¦ç¿’è©•ä¾¡ãƒ»ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆ
          - å¤šæ§˜ãªè©•ä¾¡æ–¹æ³•è¨­è¨ˆ
          - å½¢æˆçš„ãƒ»ç·æ‹¬çš„è©•ä¾¡
          - è‡ªå·±è©•ä¾¡ãƒ»ç›¸äº’è©•ä¾¡
          - å­¦ç¿’é€²æ—ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
          
          ## ðŸ“– å­¦ç¿’ã‚µãƒãƒ¼ãƒˆãƒ»ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
          - å­¦ç¿’è€…å‘ã‘ã‚¬ã‚¤ãƒ‰ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
          - é€²æ—ç®¡ç†ãƒ»å­¦ç¿’è¨ˆç”»æ”¯æ´
          - è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹ãƒ»å‚è€ƒè³‡æ–™
          - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´
          
          ## ðŸŽ¯ åŠ¹æžœçš„å­¦ç¿’ä½“é¨“
          - å€‹åˆ¥åŒ–å­¦ç¿’ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
          - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£é…æ…®
          - ç¶™ç¶šçš„æ”¹å–„ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
          - å­¦ç¿’æˆæžœæœ€å¤§åŒ–æˆ¦ç•¥
          
          ## ðŸ”„ ç¶™ç¶šçš„æ”¹å–„ãƒ»æ›´æ–°
          - å­¦ç¿’åŠ¹æžœåˆ†æžãƒ»æ¸¬å®š
          - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å“è³ªå‘ä¸Š
          - æŠ€è¡“çš„æœ€é©åŒ–ãƒ»æ›´æ–°
          - æ•™è‚²ãƒˆãƒ¬ãƒ³ãƒ‰å¯¾å¿œ
          EOF
          
          echo "ðŸ“¦ Final educational content packaging completed"
          
      - name: Upload Educational Content Package
        uses: actions/upload-artifact@v4
        with:
          name: educational-content-package-${{ github.run_number }}
          path: .final-output/
          retention-days: 30